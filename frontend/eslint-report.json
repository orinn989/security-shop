[{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\AuthGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\ConfirmDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\FeaturedProducts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\ProductCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\ResendVerification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\SkeletonCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\UserGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\ArticleModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\BrandModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\CategoryModal.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'oldImageUrl' is never reassigned. Use 'const' instead.","line":81,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":81,"endColumn":20,"fix":{"range":[2356,2401],"text":"const oldImageUrl = category?.imageUrl || null;"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { X, Upload, Save, Loader2 } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport { categoryApi } from '../../utils/api';\r\nimport { imageUploadService } from '../../utils/imageUploadService';\r\nimport type { CategorySummary } from '../../types/types';\r\n\r\ninterface CategoryModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  category?: CategorySummary;\r\n  onSuccess: () => void;\r\n}\r\n\r\nconst CategoryModal: React.FC<CategoryModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  category,\r\n  onSuccess,\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    active: true,\r\n  });\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const isEditing = !!category;\r\n\r\n  useEffect(() => {\r\n    if (category) {\r\n      setFormData({\r\n        name: category.name || '',\r\n        description: category.description || '',\r\n        active: category.active ?? true,\r\n      });\r\n      setPreviewUrl(category.imageUrl || null);\r\n    } else {\r\n      setFormData({\r\n        name: '',\r\n        description: '',\r\n        active: true,\r\n      });\r\n      setPreviewUrl(null);\r\n    }\r\n    setSelectedFile(null);\r\n    setErrors({});\r\n  }, [category, isOpen]);\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      const maxSize = 5 * 1024 * 1024;\r\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\r\n\r\n      if (file.size > maxSize) {\r\n        setErrors({ file: 'Kích thước file phải nhỏ hơn 5MB' });\r\n        return;\r\n      }\r\n\r\n      if (!allowedTypes.includes(file.type)) {\r\n        setErrors({ file: 'Chỉ chấp nhận file JPEG, PNG, WebP' });\r\n        return;\r\n      }\r\n\r\n      setSelectedFile(file);\r\n      setPreviewUrl(URL.createObjectURL(file));\r\n      setErrors({});\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    setIsLoading(true);\r\n    let uploadedImageUrl = category?.imageUrl || null;\r\n    let oldImageUrl = category?.imageUrl || null;\r\n\r\n    try {\r\n      if (selectedFile) {\r\n        const uploadResult = await imageUploadService.uploadImage(selectedFile, {\r\n          folder: 'category-images'\r\n        });\r\n        uploadedImageUrl = uploadResult.url;\r\n      }\r\n\r\n      const categoryData = {\r\n        name: formData.name.trim(),\r\n        description: formData.description?.trim() || '',\r\n        active: formData.active,\r\n        imageUrl: uploadedImageUrl,\r\n      };\r\n\r\n      if (isEditing) {\r\n        await categoryApi.update(category.id.toString(), categoryData);\r\n      } else {\r\n        await categoryApi.create(categoryData);\r\n      }\r\n      // Xóa ảnh cũ nếu có ảnh mới được upload thành công\r\n      if (selectedFile && oldImageUrl && oldImageUrl !== uploadedImageUrl) {\r\n        try {\r\n          await imageUploadService.deleteImage(oldImageUrl);\r\n        } catch (deleteError) {\r\n          console.error('Error deleting old category image:', deleteError);\r\n        }\r\n      }\r\n\r\n      toast.success(isEditing ? 'Cập nhật danh mục thành công!' : 'Thêm danh mục thành công!');\r\n      onSuccess();\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error saving category:', error);\r\n\r\n      if (!isEditing && uploadedImageUrl && selectedFile && uploadedImageUrl !== oldImageUrl) {\r\n        try {\r\n          await imageUploadService.deleteImage(uploadedImageUrl);\r\n        } catch (deleteError) {\r\n          console.error('Error deleting uploaded image:', deleteError);\r\n        }\r\n      }\r\n\r\n      setErrors({ submit: 'Có lỗi xảy ra khi lưu danh mục. Vui lòng thử lại.' });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({ name: '', description: '', active: true });\r\n    setSelectedFile(null);\r\n    setPreviewUrl(null);\r\n    setErrors({});\r\n    if (previewUrl && previewUrl.startsWith('blob:')) {\r\n      URL.revokeObjectURL(previewUrl);\r\n    }\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <h3 className=\"text-lg font-semibold text-zinc-800\">\r\n            {isEditing ? 'Sửa danh mục' : 'Thêm danh mục mới'}\r\n          </h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-zinc-700 mb-1\">\r\n              Tên danh mục *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n              placeholder=\"Nhập tên danh mục\"\r\n            />\r\n            {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-zinc-700 mb-1\">\r\n              Mô tả danh mục\r\n            </label>\r\n            <textarea\r\n              value={formData.description || ''}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n              placeholder=\"Nhập mô tả danh mục\"\r\n              rows={3}\r\n            />\r\n            {errors.description && <p className=\"text-red-500 text-sm mt-1\">{errors.description}</p>}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-zinc-700 mb-1\">\r\n              Ảnh danh mục\r\n            </label>\r\n            <div className=\"space-y-2\">\r\n              {/* Preview */}\r\n              {previewUrl && (\r\n                <div className=\"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden\">\r\n                  <img\r\n                    src={previewUrl}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\r\n                >\r\n                  <Upload className=\"w-4 h-4\" />\r\n                  Chọn ảnh\r\n                </button>\r\n                {previewUrl && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedFile(null);\r\n                      setPreviewUrl(category?.imageUrl || null);\r\n                      if (fileInputRef.current) fileInputRef.current.value = '';\r\n                    }}\r\n                    className=\"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                  >\r\n                    Xóa\r\n                  </button>\r\n                )}\r\n              </div>\r\n              {errors.file && <p className=\"text-red-500 text-sm\">{errors.file}</p>}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Active Status */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"active\"\r\n              checked={formData.active}\r\n              onChange={(e) => setFormData({ ...formData, active: e.target.checked })}\r\n              className=\"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500\"\r\n            />\r\n            <label htmlFor=\"active\" className=\"text-sm text-zinc-700\">\r\n              Hoạt động\r\n            </label>\r\n          </div>\r\n\r\n          {/* Error Message */}\r\n          {errors.submit && (\r\n            <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600 text-sm\">{errors.submit}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"flex-1 px-4 py-2 text-zinc-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\r\n              disabled={isLoading}\r\n            >\r\n              Hủy\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-cyan-500 text-white rounded-lg hover:shadow-lg transition-colors flex items-center justify-center gap-2\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n              ) : (\r\n                <Save className=\"w-4 h-4\" />\r\n              )}\r\n              {isLoading ? 'Đang lưu...' : 'Lưu'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryModal;","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\DiscountModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\InventoryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\OrderDetailsModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOrderDetails'. Either include it or remove the dependency array.","line":21,"column":6,"nodeType":"ArrayExpression","endLine":21,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, loadOrderDetails, orderId]","fix":{"range":[717,734],"text":"[isOpen, loadOrderDetails, orderId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { X, Package, User, MapPin, CreditCard, Truck } from 'lucide-react';\r\nimport type { OrderDetails } from '../../types/types';\r\nimport { orderApi } from '../../utils/api';\r\n\r\ninterface OrderDetailsModalProps {\r\n  orderId: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst OrderDetailsModal: React.FC<OrderDetailsModalProps> = ({ orderId, isOpen, onClose }) => {\r\n  const [orderDetails, setOrderDetails] = useState<OrderDetails | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && orderId) {\r\n      loadOrderDetails();\r\n    }\r\n  }, [isOpen, orderId]);\r\n\r\n  const loadOrderDetails = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await orderApi.getById(orderId);\r\n      setOrderDetails(data);\r\n    } catch (err: any) {\r\n      setError(err.message || 'Failed to load order details');\r\n      console.error('Error loading order details:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig: any = {\r\n      PENDING: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Chờ xử lý' },\r\n      WAITING_FOR_DELIVERY: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Chờ giao hàng' },\r\n      IN_TRANSIT: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Đang giao' },\r\n      DELIVERED: { bg: 'bg-green-100', text: 'text-green-800', label: 'Đã giao' },\r\n      CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', label: 'Đã hủy' },\r\n    };\r\n    const config = statusConfig[status] || statusConfig.PENDING;\r\n    return (\r\n      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getPaymentStatusBadge = (status: string) => {\r\n    const statusConfig: any = {\r\n      UNPAID: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'Chưa thanh toán' },\r\n      PAID: { bg: 'bg-green-100', text: 'text-green-800', label: 'Đã thanh toán' },\r\n      FAILED: { bg: 'bg-red-100', text: 'text-red-800', label: 'Thất bại' },\r\n      REFUNDED: { bg: 'bg-orange-100', text: 'text-orange-800', label: 'Đã hoàn tiền' },\r\n    };\r\n    const config = statusConfig[status] || statusConfig.UNPAID;\r\n    return (\r\n      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">Chi tiết đơn hàng</h2>\r\n            {orderDetails && (\r\n              <p className=\"text-sm text-gray-500 mt-1\">#{orderDetails.id.slice(-8)}</p>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6 text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {loading && (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin\"></div>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {orderDetails && !loading && (\r\n            <div className=\"space-y-6\">\r\n              {/* Status and Payment Info */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Trạng thái đơn hàng</h3>\r\n                  {getStatusBadge(orderDetails.status)}\r\n                </div>\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Thanh toán</h3>\r\n                  {getPaymentStatusBadge(orderDetails.paymentStatus)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Customer Info */}\r\n              <div className=\"border border-gray-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center gap-2 mb-3\">\r\n                  <User className=\"w-5 h-5 text-purple-600\" />\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">Thông tin khách hàng</h3>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500\">Tên khách hàng</p>\r\n                    <p className=\"font-medium text-gray-900\">{orderDetails.user.name}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500\">Email</p>\r\n                    <p className=\"font-medium text-gray-900\">{orderDetails.user.email}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500\">Số điện thoại</p>\r\n                    <p className=\"font-medium text-gray-900\">{orderDetails.user.phone || 'N/A'}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Shipping Address */}\r\n              <div className=\"border border-gray-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center gap-2 mb-3\">\r\n                  <MapPin className=\"w-5 h-5 text-purple-600\" />\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">Địa chỉ giao hàng</h3>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"font-medium text-gray-900\">{orderDetails.shippingAddress.fullName}</p>\r\n                  <p className=\"text-gray-700\">{orderDetails.shippingAddress.phone}</p>\r\n                  <p className=\"text-gray-700\">\r\n                    {orderDetails.shippingAddress.address}, {orderDetails.shippingAddress.ward}, {orderDetails.shippingAddress.district}, {orderDetails.shippingAddress.city}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Order Items */}\r\n              <div className=\"border border-gray-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <Package className=\"w-5 h-5 text-purple-600\" />\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">Sản phẩm đặt hàng</h3>\r\n                </div>\r\n                <div className=\"space-y-3\">\r\n                  {orderDetails.orderItems.map((item) => (\r\n                    <div key={item.id} className=\"flex items-center gap-4 p-3 bg-gray-50 rounded-lg\">\r\n                      <img\r\n                        src={item.product.thumbnailUrl}\r\n                        alt={item.product.name}\r\n                        className=\"w-16 h-16 object-cover rounded-lg\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h4 className=\"font-medium text-gray-900\">{item.product.name}</h4>\r\n                        <p className=\"text-sm text-gray-500\">SKU: {item.product.sku}</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-sm text-gray-500\">Số lượng: {item.quantity}</p>\r\n                        <p className=\"font-semibold text-gray-900\">{item.lineTotal.toLocaleString()} ₫</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Payment Details */}\r\n              {orderDetails.payment && (\r\n                <div className=\"border border-gray-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center gap-2 mb-3\">\r\n                    <CreditCard className=\"w-5 h-5 text-purple-600\" />\r\n                    <h3 className=\"text-lg font-semibold text-gray-800\">Thông tin thanh toán</h3>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Phương thức</p>\r\n                      <p className=\"font-medium text-gray-900\">{orderDetails.payment.method}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Nhà cung cấp</p>\r\n                      <p className=\"font-medium text-gray-900\">{orderDetails.payment.provider}</p>\r\n                    </div>\r\n                    {orderDetails.payment.transactionId && (\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-500\">Mã giao dịch</p>\r\n                        <p className=\"font-medium text-gray-900\">{orderDetails.payment.transactionId}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Shipment Info */}\r\n              {orderDetails.shipment && (\r\n                <div className=\"border border-gray-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center gap-2 mb-3\">\r\n                    <Truck className=\"w-5 h-5 text-purple-600\" />\r\n                    <h3 className=\"text-lg font-semibold text-gray-800\">Thông tin vận chuyển</h3>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-500\">Trạng thái</p>\r\n                      <p className=\"font-medium text-gray-900\">{orderDetails.shipment.status}</p>\r\n                    </div>\r\n                    {orderDetails.shipment.shippedAt && (\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-500\">Ngày gửi hàng</p>\r\n                        <p className=\"font-medium text-gray-900\">\r\n                          {new Date(orderDetails.shipment.shippedAt).toLocaleString('vi-VN')}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {orderDetails.shipment.deliveredAt && (\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-500\">Ngày giao hàng</p>\r\n                        <p className=\"font-medium text-gray-900\">\r\n                          {new Date(orderDetails.shipment.deliveredAt).toLocaleString('vi-VN')}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Order Summary */}\r\n              <div className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Tổng kết đơn hàng</h3>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Tạm tính:</span>\r\n                    <span className=\"font-medium\">{orderDetails.subTotal.toLocaleString()} ₫</span>\r\n                  </div>\r\n                  {orderDetails.discountTotal > 0 && (\r\n                    <div className=\"flex justify-between text-green-600\">\r\n                      <span>Giảm giá:</span>\r\n                      <span className=\"font-medium\">-{orderDetails.discountTotal.toLocaleString()} ₫</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Phí vận chuyển:</span>\r\n                    <span className=\"font-medium\">{orderDetails.shippingFee.toLocaleString()} ₫</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between pt-2 border-t border-gray-300\">\r\n                    <span className=\"text-lg font-bold text-gray-900\">Tổng cộng:</span>\r\n                    <span className=\"text-lg font-bold text-purple-600\">\r\n                      {orderDetails.grandTotal.toLocaleString()} ₫\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Timestamps */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                  <div>\r\n                    <p className=\"text-gray-500\">Ngày đặt hàng:</p>\r\n                    <p className=\"font-medium text-gray-900\">\r\n                      {new Date(orderDetails.createdAt).toLocaleString('vi-VN')}\r\n                    </p>\r\n                  </div>\r\n                  {orderDetails.confirmedAt && (\r\n                    <div>\r\n                      <p className=\"text-gray-500\">Ngày xác nhận:</p>\r\n                      <p className=\"font-medium text-gray-900\">\r\n                        {new Date(orderDetails.confirmedAt).toLocaleString('vi-VN')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {orderDetails.cancelledAt && (\r\n                    <div>\r\n                      <p className=\"text-gray-500\">Ngày hủy:</p>\r\n                      <p className=\"font-medium text-red-600\">\r\n                        {new Date(orderDetails.cancelledAt).toLocaleString('vi-VN')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex justify-end gap-3 p-6 border-t border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n          >\r\n            Đóng\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetailsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\ProductModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\ReviewDetailsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\TicketModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\admin-modal\\WarrantyRequestModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\chat\\ChatPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\components\\chat\\ChatWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\declarations.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\About.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Admin.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentPage' and 'pageSize'. Either include them or remove the dependency array.","line":247,"column":6,"nodeType":"ArrayExpression","endLine":247,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, currentPage, pageSize]","fix":{"range":[9221,9232],"text":"[activeTab, currentPage, pageSize]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport {\r\n  LayoutDashboard,\r\n  Package,\r\n  FolderTree,\r\n  Tag,\r\n  ShoppingCart,\r\n  Percent,\r\n  Users,\r\n  FileText,\r\n  MessageSquare,\r\n  BarChart3,\r\n  Warehouse,\r\n  Star,\r\n  Store\r\n} from 'lucide-react';\r\nimport { useAppSelector } from '../hooks';\r\n\r\n// Type for admin modules\r\ninterface AdminModule {\r\n  default: React.FC<any>;\r\n  loadData?: (page?: number, size?: number) => Promise<any>;\r\n}\r\n\r\ntype TabKey =\r\n  | 'dashboard'\r\n  | 'products'\r\n  | 'categories'\r\n  | 'brands'\r\n  | 'orders'\r\n  | 'inventories'\r\n  | 'discount'\r\n  | 'users'\r\n  | 'articles'\r\n  | 'tickets'\r\n  | 'analytics'\r\n  | 'reviews'\r\n  | 'pos';\r\n\r\n// Move TABS inside or just define all here\r\nconst ALL_TABS: { key: TabKey; label: string; icon: React.ReactNode }[] = [\r\n  { key: 'dashboard', label: 'Tổng quan', icon: <LayoutDashboard className=\"w-5 h-5\" /> },\r\n  { key: 'pos', label: 'Bán hàng (POS)', icon: <Store className=\"w-5 h-5\" /> },\r\n  { key: 'products', label: 'Sản phẩm', icon: <Package className=\"w-5 h-5\" /> },\r\n  { key: 'categories', label: 'Danh mục', icon: <FolderTree className=\"w-5 h-5\" /> },\r\n  { key: 'brands', label: 'Thương hiệu', icon: <Tag className=\"w-5 h-5\" /> },\r\n  { key: 'orders', label: 'Đơn hàng', icon: <ShoppingCart className=\"w-5 h-5\" /> },\r\n  { key: 'inventories', label: 'Tồn kho', icon: <Warehouse className=\"w-5 h-5\" /> },\r\n  { key: 'discount', label: 'Khuyến mãi', icon: <Percent className=\"w-5 h-5\" /> },\r\n  { key: 'users', label: 'Người dùng', icon: <Users className=\"w-5 h-5\" /> },\r\n  { key: 'articles', label: 'Bài viết', icon: <FileText className=\"w-5 h-5\" /> },\r\n  { key: 'tickets', label: 'Hỗ trợ', icon: <MessageSquare className=\"w-5 h-5\" /> },\r\n  { key: 'reviews', label: 'Đánh giá', icon: <Star className=\"w-5 h-5\" /> },\r\n  { key: 'analytics', label: 'Thống kê', icon: <BarChart3 className=\"w-5 h-5\" /> },\r\n];\r\n\r\nconst Admin: React.FC = () => {\r\n  const { user } = useAppSelector((state) => state.auth);\r\n\r\n  const visibleTabs = user?.role?.toLowerCase() === 'staff'\r\n    ? ALL_TABS.filter(t => t.key === 'pos' || t.key === 'orders')\r\n    : ALL_TABS;\r\n\r\n  const [activeTab, setActiveTab] = useState<TabKey>(user?.role?.toLowerCase() === 'staff' ? 'pos' : 'dashboard');\r\n  const [loading, setLoading] = useState(false);\r\n  const [LoadedComponent, setLoadedComponent] = useState<React.FC<any> | null>(null);\r\n  const [data, setData] = useState<any>(null);\r\n  const [currentLoadData, setCurrentLoadData] = useState<((page?: number, size?: number) => Promise<any>) | null>(null);\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const [pageSize, setPageSize] = useState(20);\r\n\r\n  const handlePageChange = async (page: number, size: number) => {\r\n    setCurrentPage(page);\r\n    setPageSize(size);\r\n\r\n    if (currentLoadData) {\r\n      try {\r\n        setLoading(true);\r\n        const newData = await currentLoadData(page, size);\r\n        setData(newData);\r\n      } catch (error) {\r\n        console.error('Error loading page:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const reloadCurrentTab = async () => {\r\n    if (currentLoadData) {\r\n      setLoading(true);\r\n      try {\r\n        const newData = await currentLoadData(currentPage, pageSize);\r\n        setData(newData);\r\n      } catch (error) {\r\n        console.error('Error reloading:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const loadForTab = async (tab: TabKey) => {\r\n      setLoading(true);\r\n      setData(null);\r\n      setLoadedComponent(null);\r\n      setCurrentPage(0); // Reset page when switching tabs\r\n      setPageSize(20); // Reset page size\r\n\r\n      try {\r\n        switch (tab) {\r\n          case 'dashboard': {\r\n            const mod = await import('./admin/Dashboard') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'pos': {\r\n            const mod = await import('./admin/POS') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            // POS component usually manages its own data/state, no initial load needed\r\n            setData(null);\r\n            break;\r\n          }\r\n          case 'categories': {\r\n            const mod = await import('./admin/Categories') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'brands': {\r\n            const mod = await import('./admin/Brands') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'orders': {\r\n            const mod = await import('./admin/Orders') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => (page = 0, size = 20) => mod.loadData?.(page, size) || Promise.resolve(null));\r\n            const d = await (mod.loadData?.(currentPage, pageSize) ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'inventories': {\r\n            const mod = await import('./admin/Inventories') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'products': {\r\n            const mod = await import('./admin/Products') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'discount': {\r\n            const mod = await import('./admin/Discount') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'users': {\r\n            const mod = await import('./admin/Users') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'articles': {\r\n            const mod = await import('./admin/Articles') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'tickets': {\r\n            const mod = await import('./admin/Tickets') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          case 'analytics': {\r\n            const mod = await import('./admin/Analytics') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            // Analytics component loads its own data via useEffect\r\n            setCurrentLoadData(() => () => Promise.resolve(null));\r\n            setData(null);\r\n            break;\r\n          }\r\n          case 'reviews': {\r\n            const mod = await import('./admin/Reviews') as AdminModule;\r\n            if (!mounted) return;\r\n            setLoadedComponent(() => mod.default);\r\n            setCurrentLoadData(() => mod.loadData || (() => Promise.resolve(null)));\r\n            const d = await (mod.loadData?.() ?? null);\r\n            setData(d);\r\n            break;\r\n          }\r\n          default:\r\n            break;\r\n        }\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadForTab(activeTab);\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [activeTab]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <Header />\r\n\r\n      <div className=\"w-full bg-gray-50\">\r\n        <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"mb-8\">\r\n            <div className=\"bg-gradient-to-r from-purple-600 to-cyan-500 rounded-2xl shadow-lg p-8 text-white\">\r\n              <h1 className=\"text-3xl sm:text-4xl font-bold mb-2\">Quản Trị Hệ Thống</h1>\r\n              <p className=\"text-purple-100 text-lg\">\r\n                Quản lý toàn bộ nội dung và dữ liệu của website\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"flex flex-col lg:flex-row gap-6\">\r\n            {/* Sidebar Navigation */}\r\n            <aside className=\"w-full lg:w-64 flex-shrink-0\">\r\n              <div className=\"bg-white rounded-xl shadow-sm p-4 sticky top-24\">\r\n                <nav className=\"space-y-1\">\r\n                  {visibleTabs.map((tab) => (\r\n                    <button\r\n                      key={tab.key}\r\n                      onClick={() => setActiveTab(tab.key)}\r\n                      className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all duration-200 ${activeTab === tab.key\r\n                        ? 'bg-gradient-to-r from-purple-600 to-cyan-500 text-white shadow-md transform scale-[1.02]'\r\n                        : 'text-gray-700 hover:bg-gray-50 hover:text-purple-600'\r\n                        }`}\r\n                    >\r\n                      <span className={activeTab === tab.key ? 'text-white' : 'text-gray-500'}>\r\n                        {tab.icon}\r\n                      </span>\r\n                      <span className=\"font-medium\">{tab.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </nav>\r\n              </div>\r\n            </aside>\r\n\r\n            {/* Content Area */}\r\n            <section className=\"flex-1 min-h-[500px]\">\r\n              <div className=\"bg-white rounded-xl shadow-sm p-6\">\r\n                {loading && (\r\n                  <div className=\"flex flex-col items-center justify-center py-16\">\r\n                    <div className=\"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mb-4\"></div>\r\n                    <p className=\"text-gray-600 font-medium\">Đang tải dữ liệu...</p>\r\n                  </div>\r\n                )}\r\n\r\n                {!loading && LoadedComponent && (\r\n                  <div className=\"animate-fadeIn\">\r\n                    <LoadedComponent\r\n                      data={data}\r\n                      onReload={reloadCurrentTab}\r\n                      onPageChange={activeTab === 'orders' ? handlePageChange : undefined}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {!loading && !LoadedComponent && (\r\n                  <div className=\"text-center py-16\">\r\n                    <div className=\"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <LayoutDashboard className=\"w-10 h-10 text-purple-600\" />\r\n                    </div>\r\n                    <p className=\"text-gray-600 text-lg\">Chọn một mục từ menu để bắt đầu</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </section>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Cart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Checkout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Contact.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\ForgotPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\OAuth2Redirect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\OrderDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\OrderSuccess.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Orders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Privacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\ProductDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Products.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Profile.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMyReviews'. Either include it or remove the dependency array.","line":123,"column":6,"nodeType":"ArrayExpression","endLine":123,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, fetchMyReviews, user]","fix":{"range":[3533,3550],"text":"[activeTab, fetchMyReviews, user]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":330,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":330,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":343,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":343,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":359,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":373,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":373,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":390,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":390,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":473,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":473,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":517,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":517,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":528,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":528,"endColumn":19}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAppDispatch, useAppSelector } from '../hooks';\r\nimport { logout, restoreAuthSuccess } from '../stores/authSlice';\r\nimport { toast } from 'react-toastify';\r\nimport { userApi, AddressApi, ReviewApi, SupportTicketApi } from '../utils/api';\r\nimport axiosInstance from '../utils/axiosConfig';\r\nimport { authService } from '../utils/authService';\r\nimport { imageUploadService } from '../utils/imageUploadService';\r\nimport {\r\n  Star,\r\n  CheckCircle,\r\n  XCircle,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { getProvinces, getDistricts, getWards } from '../utils/locationService';\r\n\r\ninterface Address {\r\n  id: number;\r\n  name: string;\r\n  phone: string;\r\n  street: string;\r\n  ward: string;\r\n  province: string;\r\n  isDefault: boolean;\r\n}\r\n\r\ninterface Review {\r\n  id: number;\r\n  rating: number;\r\n  comment: string;\r\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\r\n  createdAt: string;\r\n  productName?: string;\r\n}\r\n\r\ninterface Ticket {\r\n  id: string;\r\n  title: string;\r\n  subject: string;\r\n  content: string;\r\n  status: 'OPEN' | 'IN_PROGRESS' | 'RESOLVED' | 'CLOSED';\r\n  createdAt: string;\r\n}\r\n\r\n\r\nconst Profile: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('account');\r\n  const [userEmail, setUserEmail] = useState<string | null>(null);\r\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\r\n  const [isUploadingAvatar, setIsUploadingAvatar] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [loadingReviews, setLoadingReviews] = useState(false);\r\n  const [filterStatus, setFilterStatus] = useState<'ALL' | 'PENDING' | 'APPROVED' | 'REJECTED'>('ALL');\r\n\r\n  const [editingReview, setEditingReview] = useState<Review | null>(null);\r\n  const [editRating, setEditRating] = useState(5);\r\n  const [editComment, setEditComment] = useState('');\r\n  const [savingEdit, setSavingEdit] = useState(false);\r\n\r\n  const handleEditReview = (review: Review) => {\r\n    setEditingReview(review);\r\n    setEditRating(review.rating);\r\n    setEditComment(review.comment);\r\n  };\r\n\r\n  const handleUpdateReview = async () => {\r\n    if (!editingReview) return;\r\n\r\n    try {\r\n      setSavingEdit(true);\r\n\r\n      await ReviewApi.updateReview(editingReview.id, {\r\n        rating: editRating,\r\n        comment: editComment\r\n      });\r\n\r\n      toast.success('Cập nhật đánh giá thành công!');\r\n      setEditingReview(null);\r\n      fetchMyReviews(); // refresh list\r\n    } catch {\r\n      toast.error('Cập nhật đánh giá thất bại!');\r\n    } finally {\r\n      setSavingEdit(false);\r\n    }\r\n  };\r\n\r\n\r\n  const { user } = useAppSelector((state) => state.auth);\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  // Login/out redirect\r\n  useEffect(() => {\r\n    if (!user || user.role === \"guest\") navigate('/login');\r\n    setUserEmail(user?.email || null);\r\n  }, [navigate, user]);\r\n\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    navigate('/');\r\n  };\r\n\r\n  // Profile\r\n  const [formData, setFormData] = useState({\r\n    id: user?.id || '',\r\n    name: user?.name || '',\r\n    phone: user?.phone || '',\r\n    avatarUrl: user?.avatarUrl || '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'reviews' && user?.id) {\r\n      fetchMyReviews();\r\n    }\r\n  }, [activeTab, user]);\r\n\r\n  const fetchMyReviews = async () => {\r\n    try {\r\n      setLoadingReviews(true);\r\n      const data = await ReviewApi.getReviewsByUser(user!.id);\r\n      setReviews(data);\r\n    } catch {\r\n      toast.error('Không thể tải đánh giá');\r\n    } finally {\r\n      setLoadingReviews(false);\r\n    }\r\n  };\r\n\r\n  // Update formData when user changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        id: user.id || '',\r\n        name: user.name || '',\r\n        phone: user.phone || '',\r\n        avatarUrl: user.avatarUrl || '',\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  }\r\n\r\n  // Avatar Upload Handler\r\n  const handleAvatarClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleAvatarChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setIsUploadingAvatar(true);\r\n\r\n    try {\r\n      const oldAvatarUrl = formData.avatarUrl;\r\n\r\n      const result = await imageUploadService.uploadImage(file, {\r\n        folder: 'users'\r\n      });\r\n\r\n      const updateData = {\r\n        id: formData.id,\r\n        name: formData.name,\r\n        phone: formData.phone?.trim() || null,\r\n        avatarUrl: result.url\r\n      };\r\n\r\n      await userApi.updateProfile(updateData);\r\n\r\n      if (oldAvatarUrl) {\r\n        try {\r\n          await imageUploadService.deleteImage(oldAvatarUrl);\r\n        } catch (deleteError) {\r\n          console.error('Failed to delete old avatar:', deleteError);\r\n        }\r\n      }\r\n\r\n      toast.success('Cập nhật ảnh đại diện thành công!');\r\n\r\n      const response = await axiosInstance.get(\"/auth/me\");\r\n      const updatedUser = response.data;\r\n\r\n      setFormData(prev => ({ ...prev, avatarUrl: result.url }));\r\n\r\n      const token = localStorage.getItem(\"accessToken\");\r\n      if (token) {\r\n        dispatch(restoreAuthSuccess({ user: updatedUser, accessToken: token }));\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser));\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Avatar upload failed:', error);\r\n\r\n      if (error.response?.data?.message) {\r\n        toast.error(error.response.data.message);\r\n      } else if (!error.message?.includes('File size') && !error.message?.includes('Only')) {\r\n        toast.error('Tải ảnh lên thất bại, vui lòng thử lại!');\r\n      }\r\n    } finally {\r\n      setIsUploadingAvatar(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFormSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (formData.phone) {\r\n      const phoneRegex = /^(\\+84|0)[0-9]{9,10}$/;\r\n      if (!phoneRegex.test(formData.phone)) {\r\n        toast.error(\"Số điện thoại không hợp lệ! (VD: 0901234567 hoặc +84901234567)\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const dataToUpdate = {\r\n        ...formData,\r\n        phone: formData.phone?.trim() || null,\r\n      };\r\n\r\n      await userApi.updateProfile(dataToUpdate);\r\n      toast.success(\"Cập nhật thông tin cá nhân thành công!\");\r\n\r\n      const response = await axiosInstance.get(\"/auth/me\");\r\n      const updatedUser = response.data;\r\n\r\n      const token = localStorage.getItem(\"accessToken\");\r\n      if (token) {\r\n        dispatch(restoreAuthSuccess({ user: updatedUser, accessToken: token }));\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser));\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Update profile failed:\", error);\r\n      const errorMsg = error.response?.data?.message || \"Cập nhật thất bại, vui lòng thử lại!\";\r\n      toast.error(errorMsg);\r\n    }\r\n  };\r\n\r\n  // Change pass\r\n  const [pwdForm, setPwdForm] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  });\r\n\r\n  const currentPwdRef = useRef<HTMLInputElement>(null);\r\n  const newPwdRef = useRef<HTMLInputElement>(null);\r\n  const confirmPwdRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handlePwdInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setPwdForm(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleChangePassword = async () => {\r\n    if (!pwdForm.currentPassword) {\r\n      toast.error(\"Vui lòng nhập mật khẩu hiện tại!\");\r\n      currentPwdRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    if (!pwdForm.newPassword) {\r\n      toast.error(\"Vui lòng nhập mật khẩu mới!\");\r\n      newPwdRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    if (pwdForm.newPassword !== pwdForm.confirmPassword) {\r\n      toast.error(\"Mật khẩu mới không khớp!\");\r\n      confirmPwdRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await authService.changePassword(pwdForm.currentPassword, pwdForm.newPassword);\r\n\r\n      toast.success(\"Đổi mật khẩu thành công!\");\r\n      setPwdForm({ currentPassword: \"\", newPassword: \"\", confirmPassword: \"\" });\r\n      currentPwdRef.current?.focus();\r\n    } catch (error: any) {\r\n      console.error(\"Change password failed:\", error);\r\n      if (error.response?.data) toast.error(error.response.data);\r\n      else toast.error(\"Đổi mật khẩu thất bại, vui lòng thử lại!\");\r\n    }\r\n  };\r\n\r\n  // Addresses\r\n  const [addresses, setAddresses] = useState<Address[]>([]);\r\n  const [loadingAddresses, setLoadingAddresses] = useState(false);\r\n  const [editingAddress, setEditingAddress] = useState<Address | null>(null);\r\n  const [addressForm, setAddressForm] = useState({\r\n    name: '',\r\n    phone: '',\r\n    street: '',\r\n    ward: '',\r\n    province: '',\r\n    isDefault: false,\r\n  });\r\n\r\n  const [showAddressForm, setShowAddressForm] = useState(false);\r\n\r\n  // Province API state\r\n  const [provinces, setProvinces] = useState<any[]>([]);\r\n  const [districts, setDistricts] = useState<any[]>([]);\r\n  const [wards, setWards] = useState<any[]>([]);\r\n  const [selectedProvinceId, setSelectedProvinceId] = useState<string>('');\r\n  const [selectedDistrictId, setSelectedDistrictId] = useState<string>('');\r\n  const [loadingProvinces, setLoadingProvinces] = useState(false);\r\n  const [loadingDistricts, setLoadingDistricts] = useState(false);\r\n  const [loadingWards, setLoadingWards] = useState(false);\r\n\r\n  const fetchAddresses = async () => {\r\n    setLoadingAddresses(true);\r\n    try {\r\n      const data = await AddressApi.getAll();\r\n      setAddresses(data);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải địa chỉ!');\r\n    } finally {\r\n      setLoadingAddresses(false);\r\n    }\r\n  };\r\n\r\n  // Fetch provinces\r\n  const fetchProvinces = () => {\r\n    setLoadingProvinces(true);\r\n    try {\r\n      const results = getProvinces();\r\n      setProvinces(results);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải danh sách tỉnh thành!');\r\n    } finally {\r\n      setLoadingProvinces(false);\r\n    }\r\n  };\r\n\r\n  // Fetch districts when province is selected\r\n  const fetchDistricts = (provinceId: string) => {\r\n    setLoadingDistricts(true);\r\n    setDistricts([]);\r\n    setWards([]);\r\n    setSelectedDistrictId('');\r\n    try {\r\n      const results = getDistricts(provinceId);\r\n      setDistricts(results);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải danh sách quận huyện!');\r\n    } finally {\r\n      setLoadingDistricts(false);\r\n    }\r\n  };\r\n\r\n  // Fetch wards when district is selected\r\n  const fetchWards = (districtId: string) => {\r\n    setLoadingWards(true);\r\n    setWards([]);\r\n    try {\r\n      const results = getWards(districtId);\r\n      setWards(results);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải danh sách phường xã!');\r\n    } finally {\r\n      setLoadingWards(false);\r\n    }\r\n  };\r\n\r\n  // Tickets\r\n  const [tickets, setTickets] = useState<Ticket[]>([]);\r\n  const [loadingTickets, setLoadingTickets] = useState(false);\r\n  const [closingTicket, setClosingTicket] = useState<string | null>(null);\r\n\r\n  const fetchMyTickets = async () => {\r\n    setLoadingTickets(true);\r\n    try {\r\n      const data = await SupportTicketApi.getMyTickets({ size: 20 });\r\n      setTickets(data.content);\r\n    } catch (error) {\r\n      toast.error('Lỗi khi tải yêu cầu hỗ trợ!');\r\n    } finally {\r\n      setLoadingTickets(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseTicket = async (id: string) => {\r\n    if (!window.confirm('Bạn có chắc chắn muốn đóng yêu cầu này?')) return;\r\n    setClosingTicket(id);\r\n    try {\r\n      await SupportTicketApi.closeTicket(id);\r\n      toast.success('Đã đóng yêu cầu thành công!');\r\n      fetchMyTickets();\r\n    } catch {\r\n      toast.error('Lỗi khi đóng yêu cầu!');\r\n    } finally {\r\n      setClosingTicket(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'address') {\r\n      fetchAddresses();\r\n      fetchProvinces();\r\n    } else if (activeTab === 'support') {\r\n      fetchMyTickets();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const handleAddressInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target;\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n\r\n    if (name === 'province') {\r\n      const province = provinces.find(p => p.province_id === value);\r\n      setSelectedProvinceId(value);\r\n      setAddressForm(prev => ({\r\n        ...prev,\r\n        province: province?.province_name || '',\r\n        ward: ''\r\n      }));\r\n      setSelectedDistrictId('');\r\n      if (value) {\r\n        fetchDistricts(value);\r\n      } else {\r\n        setDistricts([]);\r\n        setWards([]);\r\n      }\r\n    } else if (name === 'district') {\r\n      districts.find(d => d.district_id === value);\r\n      setSelectedDistrictId(value);\r\n      if (value) {\r\n        fetchWards(value);\r\n      } else {\r\n        setWards([]);\r\n      }\r\n    } else if (name === 'ward') {\r\n      const ward = wards.find(w => w.ward_id === value);\r\n      const district = districts.find(d => d.district_id === selectedDistrictId);\r\n      setAddressForm(prev => ({\r\n        ...prev,\r\n        ward: ward && district ? `${ward.ward_name}, ${district.district_name}` : ''\r\n      }));\r\n    } else {\r\n      setAddressForm(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\r\n    }\r\n  };\r\n\r\n  const handleAddressSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingAddress) {\r\n        await AddressApi.update(editingAddress.id.toString(), addressForm);\r\n        toast.success('Cập nhật địa chỉ thành công!');\r\n      } else {\r\n        await AddressApi.create(addressForm);\r\n        toast.success('Thêm địa chỉ thành công!');\r\n      }\r\n      setShowAddressForm(false);\r\n      setEditingAddress(null);\r\n      resetAddressForm();\r\n      fetchAddresses();\r\n    } catch (error) {\r\n      toast.error('Lỗi khi lưu địa chỉ!');\r\n    }\r\n  };\r\n\r\n  const handleEditAddress = (addr: Address) => {\r\n    setAddressForm({\r\n      name: addr.name,\r\n      phone: addr.phone,\r\n      street: addr.street,\r\n      ward: addr.ward,\r\n      province: addr.province,\r\n      isDefault: addr.isDefault,\r\n    });\r\n    setEditingAddress(addr);\r\n    setShowAddressForm(true);\r\n    // Reset selections when editing\r\n    setSelectedProvinceId('');\r\n    setSelectedDistrictId('');\r\n    setDistricts([]);\r\n    setWards([]);\r\n  };\r\n\r\n  // Reset address form\r\n  const resetAddressForm = () => {\r\n    setAddressForm({\r\n      name: '',\r\n      phone: '',\r\n      street: '',\r\n      ward: '',\r\n      province: '',\r\n      isDefault: false\r\n    });\r\n    setSelectedProvinceId('');\r\n    setSelectedDistrictId('');\r\n    setDistricts([]);\r\n    setWards([]);\r\n  };\r\n\r\n  const handleSetDefault = async (id: number) => {\r\n    try {\r\n      await AddressApi.setDefault(id.toString());\r\n      toast.success('Đặt địa chỉ mặc định thành công!');\r\n      fetchAddresses();\r\n    } catch (error) {\r\n      toast.error('Lỗi khi đặt địa chỉ mặc định!');\r\n    }\r\n  }\r\n\r\n  const handleDeleteAddress = async (id: number) => {\r\n    if (!window.confirm('Bạn có chắc chắn muốn xóa địa chỉ này?')) return;\r\n    try {\r\n      await AddressApi.delete(id.toString());\r\n      toast.success('Xóa địa chỉ thành công!');\r\n      fetchAddresses();\r\n    } catch (error) {\r\n      toast.error('Lỗi khi xóa địa chỉ!');\r\n    }\r\n\r\n  }\r\n\r\n  // Payments (leave as sample since no API)\r\n  const samplePayments = [\r\n    { id: 1, type: 'Visa', card: '**** **** **** 1234', default: true },\r\n    { id: 2, type: 'Momo', card: 'SĐT: 0987 654 321', default: false }\r\n  ];\r\n\r\n  const menu = [\r\n    { key: 'account', label: 'Thông tin cá nhân' },\r\n    { key: 'reviews', label: 'Đánh giá của tôi' },\r\n    { key: 'address', label: 'Địa chỉ' },\r\n    { key: 'support', label: 'Hỗ trợ' },\r\n    { key: 'payment', label: 'Phương thức thanh toán' },\r\n    { key: 'password', label: 'Đổi mật khẩu' },\r\n    { key: 'settings', label: 'Tùy chỉnh khác' },\r\n  ];\r\n\r\n  const handleMenuItemClick = (key: string) => {\r\n    setActiveTab(key);\r\n    setShowMobileMenu(false);\r\n  };\r\n\r\n  const renderContent = () => {\r\n    switch (activeTab) {\r\n      case 'account':\r\n        return (\r\n          <form onSubmit={handleFormSubmit}>\r\n            <h2 className=\"text-xl font-semibold text-zinc-800 mb-4\">Thông tin cá nhân</h2>\r\n\r\n            {/* Avatar Section */}\r\n            <div className=\"flex flex-col items-center mb-6\">\r\n              <div className=\"relative group\">\r\n                <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-purple-200 shadow-lg\">\r\n                  {formData.avatarUrl ? (\r\n                    <img\r\n                      src={formData.avatarUrl}\r\n                      alt=\"Avatar\"\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white text-4xl font-bold\">\r\n                      {formData.name?.charAt(0)?.toUpperCase() || 'U'}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Overlay on hover */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAvatarClick}\r\n                  disabled={isUploadingAvatar}\r\n                  className=\"absolute inset-0 rounded-full bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer disabled:cursor-not-allowed\"\r\n                >\r\n                  {isUploadingAvatar ? (\r\n                    <svg className=\"animate-spin h-8 w-8 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                  ) : (\r\n                    <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/jpeg,image/jpg,image/png,image/webp\"\r\n                onChange={handleAvatarChange}\r\n                className=\"hidden\"\r\n              />\r\n\r\n              <p className=\"text-sm text-gray-500 mt-3 text-center\">\r\n                Click vào ảnh để thay đổi\r\n                <br />\r\n                <span className=\"text-xs\">(Tối đa 5MB, định dạng: JPEG, PNG, WebP)</span>\r\n              </p>\r\n            </div>\r\n\r\n            <p className=\"text-gray-600 mb-4 text-sm sm:text-base\">Email: {userEmail}</p>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n              <input\r\n                className=\"border p-2 rounded text-sm sm:text-base\"\r\n                value={formData.name}\r\n                name=\"name\"\r\n                onChange={handleInputChange}\r\n                placeholder=\"Họ tên\"\r\n              />\r\n              <div className=\"flex flex-col\">\r\n                <input\r\n                  className=\"border p-2 rounded text-sm sm:text-base\"\r\n                  value={formData.phone}\r\n                  name=\"phone\"\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Số điện thoại\"\r\n                  type=\"tel\"\r\n                />\r\n                <span className=\"text-xs text-gray-500 mt-1\">VD: 0901234567 hoặc +84901234567</span>\r\n              </div>\r\n              <input\r\n                className=\"border p-2 rounded text-sm sm:text-base\"\r\n                placeholder=\"Ngày sinh\"\r\n                type=\"date\"\r\n              />\r\n              <select className=\"border p-2 rounded text-sm sm:text-base\">\r\n                <option>Giới tính</option>\r\n                <option>Nam</option>\r\n                <option>Nữ</option>\r\n                <option>Khác</option>\r\n              </select>\r\n            </div>\r\n            <button className=\"mt-4 bg-purple-600 text-white px-4 sm:px-6 py-2 rounded-lg hover:bg-purple-700 w-full sm:w-auto text-sm sm:text-base\">\r\n              Lưu thay đổi\r\n            </button>\r\n          </form>\r\n        );\r\n\r\n      case 'reviews':\r\n        return (\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">Đánh giá của tôi</h2>\r\n\r\n            {/* FILTER */}\r\n            <div className=\"flex gap-2 mb-4 flex-wrap\">\r\n              {(['ALL', 'PENDING', 'APPROVED', 'REJECTED'] as const).map(s => (\r\n                <button\r\n                  key={s}\r\n                  onClick={() => setFilterStatus(s)}\r\n                  className={`px-4 py-1.5 rounded-full text-sm\r\n                    ${filterStatus === s\r\n                      ? 'bg-purple-600 text-white'\r\n                      : 'bg-gray-100 text-gray-600'}`}\r\n                >\r\n                  {s}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n\r\n\r\n            {loadingReviews ? (\r\n              <p>Đang tải đánh giá...</p>\r\n            ) : reviews.length === 0 ? (\r\n              <p>Bạn chưa có đánh giá nào</p>\r\n            ) : (\r\n              reviews\r\n                .filter(\r\n                  r => filterStatus === 'ALL' || r.status === filterStatus\r\n                )\r\n                .map(review => (\r\n                  <div\r\n                    key={review.id}\r\n                    className=\"border p-4 rounded mb-4 bg-white\"\r\n                  >\r\n                    <div className=\"flex justify-between\">\r\n                      <h3 className=\"font-semibold\">\r\n                        {review.productName || 'Sản phẩm'}\r\n                      </h3>\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {new Date(review.createdAt).toLocaleDateString('vi-VN')}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* STARS */}\r\n                    <div className=\"flex gap-1 my-2\">\r\n                      {[...Array(5)].map((_, i) => (\r\n                        <Star\r\n                          key={i}\r\n                          className={`w-4 h-4 ${i < review.rating\r\n                            ? 'text-yellow-400 fill-yellow-400'\r\n                            : 'text-gray-300'\r\n                            }`}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n\r\n                    <p className=\"text-gray-700\">{review.comment}</p>\r\n\r\n                    {/* STATUS */}\r\n                    <div className=\"mt-2 text-sm flex items-center gap-1\">\r\n                      {review.status === 'PENDING' && (\r\n                        <span className=\"text-yellow-600 flex gap-1\">\r\n                          <Clock size={14} /> Chờ duyệt\r\n                        </span>\r\n                      )}\r\n                      {review.status === 'APPROVED' && (\r\n                        <span className=\"text-green-600 flex gap-1\">\r\n                          <CheckCircle size={14} /> Đã duyệt\r\n                        </span>\r\n                      )}\r\n                      {review.status === 'REJECTED' && (\r\n                        <span className=\"text-red-600 flex gap-1\">\r\n                          <XCircle size={14} /> Từ chối\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {review.status === 'PENDING' && (\r\n                      <button\r\n                        onClick={() => handleEditReview(review)}\r\n                        className=\"text-indigo-600 text-sm hover:underline mt-2 right-auto block\"\r\n                      >\r\n                        Chỉnh sửa\r\n                      </button>\r\n                    )}\r\n\r\n                    {editingReview && (\r\n                      <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n                        <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n                          <h3 className=\"text-lg font-semibold mb-4\">Chỉnh sửa đánh giá</h3>\r\n\r\n                          {/* Rating */}\r\n                          <div className=\"flex gap-1 mb-3\">\r\n                            {[1, 2, 3, 4, 5].map(i => (\r\n                              <Star\r\n                                key={i}\r\n                                onClick={() => setEditRating(i)}\r\n                                className={`w-6 h-6 cursor-pointer ${i <= editRating\r\n                                  ? 'text-yellow-400 fill-yellow-400'\r\n                                  : 'text-gray-300'\r\n                                  }`}\r\n                              />\r\n                            ))}\r\n                          </div>\r\n\r\n                          {/* Comment */}\r\n                          <textarea\r\n                            value={editComment}\r\n                            onChange={e => setEditComment(e.target.value)}\r\n                            className=\"w-full border rounded p-2 mb-4\"\r\n                            rows={4}\r\n                          />\r\n\r\n                          <div className=\"flex justify-end gap-2\">\r\n                            <button\r\n                              onClick={() => setEditingReview(null)}\r\n                              className=\"px-4 py-2 border rounded\"\r\n                            >\r\n                              Hủy\r\n                            </button>\r\n                            <button\r\n                              onClick={handleUpdateReview}\r\n                              disabled={savingEdit}\r\n                              className=\"px-4 py-2 bg-purple-600 text-white rounded disabled:opacity-50\"\r\n                            >\r\n                              {savingEdit ? 'Đang lưu...' : 'Lưu'}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n\r\n                  </div>\r\n                ))\r\n            )}\r\n          </div>\r\n        );\r\n\r\n\r\n\r\n      case 'support':\r\n        return (\r\n          <div>\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-xl font-semibold\">Yêu cầu hỗ trợ</h2>\r\n              <button\r\n                onClick={fetchMyTickets}\r\n                className=\"text-indigo-600 hover:underline\"\r\n              >\r\n                Làm mới\r\n              </button>\r\n            </div>\r\n            {loadingTickets ? (\r\n              <p>Đang tải...</p>\r\n            ) : tickets.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <p>Bạn chưa gửi yêu cầu hỗ trợ nào.</p>\r\n                <a href=\"/contact\" className=\"text-indigo-600 font-medium hover:underline mt-2 inline-block\">\r\n                  Gửi yêu cầu ngay\r\n                </a>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {tickets.map((ticket) => (\r\n                  <div key={ticket.id} className=\"border rounded-lg p-4 bg-white shadow-sm\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                      <div>\r\n                        <span className={`inline-block px-2 py-1 rounded text-xs font-semibold mb-2\r\n                           ${ticket.status === 'OPEN' ? 'bg-blue-100 text-blue-700' :\r\n                            ticket.status === 'IN_PROGRESS' ? 'bg-yellow-100 text-yellow-700' :\r\n                              ticket.status === 'RESOLVED' ? 'bg-green-100 text-green-700' :\r\n                                'bg-gray-100 text-gray-700'}\r\n                         `}>\r\n                          {ticket.status === 'OPEN' ? 'Đang mở' :\r\n                            ticket.status === 'IN_PROGRESS' ? 'Đang xử lý' :\r\n                              ticket.status === 'RESOLVED' ? 'Đã giải quyết' : 'Đã đóng'}\r\n                        </span>\r\n                        <h3 className=\"font-semibold text-lg\">{ticket.title}</h3>\r\n                      </div>\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {new Date(ticket.createdAt).toLocaleDateString('vi-VN')}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"text-sm text-gray-600 mb-1\">\r\n                      <span className=\"font-medium\">Chủ đề:</span> {ticket.subject}\r\n                    </div>\r\n                    <p className=\"text-gray-700 bg-gray-50 p-3 rounded mt-2 border border-gray-100\">\r\n                      {ticket.content}\r\n                    </p>\r\n\r\n                    {(ticket.status === 'OPEN' || ticket.status === 'IN_PROGRESS') && (\r\n                      <div className=\"mt-3 text-right\">\r\n                        <button\r\n                          onClick={() => handleCloseTicket(ticket.id)}\r\n                          disabled={closingTicket === ticket.id}\r\n                          className=\"text-red-600 hover:text-red-700 text-sm font-medium border border-red-200 px-3 py-1 rounded hover:bg-red-50 transition\"\r\n                        >\r\n                          {closingTicket === ticket.id ? 'Đang đóng...' : 'Đóng yêu cầu'}\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'address':\r\n        return (\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">Địa chỉ của tôi</h2>\r\n            {loadingAddresses ? (\r\n              <p>Đang tải...</p>\r\n            ) : (\r\n              addresses.map(addr => (\r\n                <div key={addr.id} className=\"border rounded p-3 sm:p-4 mb-3 bg-white shadow-sm flex flex-col sm:flex-row justify-between sm:items-center gap-2\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-bold text-sm sm:text-base\">{addr.name} ({addr.phone})</p>\r\n                    <p className=\"text-gray-600 text-xs sm:text-sm mt-1\">{`${addr.street}, ${addr.ward}, ${addr.province}`}</p>\r\n                    {addr.isDefault && <span className=\"text-purple-600 text-xs font-semibold inline-block mt-1\">Mặc định</span>}\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <button onClick={() => handleEditAddress(addr)} className=\"text-purple-600 text-sm\">Sửa</button>\r\n                    <button onClick={() => handleDeleteAddress(addr.id)} className=\"text-red-600 text-sm\">Xóa</button>\r\n                    {!addr.isDefault && (\r\n                      <button onClick={() => handleSetDefault(addr.id)} className=\"text-green-600 text-sm\">Đặt mặc định</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n            <button\r\n              onClick={() => {\r\n                setShowAddressForm(true);\r\n                setEditingAddress(null);\r\n                resetAddressForm();\r\n              }}\r\n              className=\"mt-3 bg-purple-500 text-white px-4 py-2 rounded w-full sm:w-auto text-sm sm:text-base\"\r\n            >\r\n              + Thêm địa chỉ\r\n            </button>\r\n\r\n            {/* Modal Overlay */}\r\n            {showAddressForm && (\r\n              <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n                  {/* Modal Header */}\r\n                  <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-800\">\r\n                      {editingAddress ? 'Sửa địa chỉ' : 'Thêm địa chỉ mới'}\r\n                    </h3>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowAddressForm(false);\r\n                        resetAddressForm();\r\n                      }}\r\n                      className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                    >\r\n                      <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Modal Body */}\r\n                  <div className=\"px-6 py-6\">\r\n                    <form onSubmit={handleAddressSubmit} className=\"grid grid-cols-1 gap-4\">\r\n                      {/* Name Input */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Tên người nhận <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                          name=\"name\"\r\n                          value={addressForm.name}\r\n                          onChange={handleAddressInputChange}\r\n                          placeholder=\"Nhập tên người nhận\"\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Phone Input */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Số điện thoại <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                          name=\"phone\"\r\n                          value={addressForm.phone}\r\n                          onChange={handleAddressInputChange}\r\n                          placeholder=\"Nhập số điện thoại\"\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Street Input */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Địa chỉ cụ thể <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                          name=\"street\"\r\n                          value={addressForm.street}\r\n                          onChange={handleAddressInputChange}\r\n                          placeholder=\"Số nhà, tên đường\"\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                          required\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Province Selector */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Tỉnh / Thành phố <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"province\"\r\n                          value={selectedProvinceId}\r\n                          onChange={handleAddressInputChange}\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                          required\r\n                          disabled={loadingProvinces}\r\n                        >\r\n                          <option value=\"\">-- Chọn Tỉnh / Thành phố --</option>\r\n                          {provinces.map(province => (\r\n                            <option key={province.province_id} value={province.province_id}>\r\n                              {province.province_name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* District Selector */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Quận / Huyện <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"district\"\r\n                          value={selectedDistrictId}\r\n                          onChange={handleAddressInputChange}\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\r\n                          required\r\n                          disabled={!selectedProvinceId || loadingDistricts}\r\n                        >\r\n                          <option value=\"\">-- Chọn Quận / Huyện --</option>\r\n                          {districts.map(district => (\r\n                            <option key={district.district_id} value={district.district_id}>\r\n                              {district.district_name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* Ward Selector */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Phường / Xã <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <select\r\n                          name=\"ward\"\r\n                          value={wards.find(w => addressForm.ward.includes(w.ward_name))?.ward_id || ''}\r\n                          onChange={handleAddressInputChange}\r\n                          className=\"w-full border border-gray-300 p-2.5 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\r\n                          required\r\n                          disabled={!selectedDistrictId || loadingWards}\r\n                        >\r\n                          <option value=\"\">-- Chọn Phường / Xã --</option>\r\n                          {wards.map(ward => (\r\n                            <option key={ward.ward_id} value={ward.ward_id}>\r\n                              {ward.ward_name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* Default Checkbox */}\r\n                      <div className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"isDefault\"\r\n                          checked={addressForm.isDefault}\r\n                          onChange={handleAddressInputChange}\r\n                          className=\"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500\"\r\n                          id=\"isDefault\"\r\n                        />\r\n                        <label htmlFor=\"isDefault\" className=\"text-sm font-medium text-gray-700 cursor-pointer\">\r\n                          Đặt làm địa chỉ mặc định\r\n                        </label>\r\n                      </div>\r\n\r\n                      {/* Form Actions */}\r\n                      <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                          type=\"submit\"\r\n                          className=\"flex-1 bg-purple-600 text-white px-6 py-2.5 rounded-lg hover:bg-purple-700 transition-colors font-medium\"\r\n                        >\r\n                          {editingAddress ? 'Cập nhật' : 'Thêm địa chỉ'}\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => {\r\n                            setShowAddressForm(false);\r\n                            resetAddressForm();\r\n                          }}\r\n                          className=\"px-6 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium\"\r\n                        >\r\n                          Hủy\r\n                        </button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'payment':\r\n        return (\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">Phương thức thanh toán</h2>\r\n            {samplePayments.map(pay => (\r\n              <div key={pay.id} className=\"border rounded p-3 sm:p-4 mb-3 bg-white shadow-sm flex flex-col sm:flex-row justify-between sm:items-center gap-2\">\r\n                <div className=\"flex-1\">\r\n                  <p className=\"font-bold text-sm sm:text-base\">{pay.type}</p>\r\n                  <p className=\"text-gray-600 text-xs sm:text-sm mt-1\">{pay.card}</p>\r\n                  {pay.default && <span className=\"text-purple-600 text-xs font-semibold inline-block mt-1\">Mặc định</span>}\r\n                </div>\r\n                <button className=\"text-purple-600 text-sm self-start sm:self-auto\">Sửa</button>\r\n              </div>\r\n            ))}\r\n            <button className=\"mt-3 bg-cyan-500 text-white px-4 py-2 rounded w-full sm:w-auto text-sm sm:text-base\">\r\n              + Thêm phương thức\r\n            </button>\r\n          </div>\r\n        );\r\n\r\n      case 'password':\r\n        return (\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">Đổi mật khẩu</h2>\r\n            <div className=\"space-y-3 max-w-full sm:max-w-md\">\r\n              <input\r\n                ref={currentPwdRef}\r\n                type=\"password\"\r\n                name=\"currentPassword\"\r\n                value={pwdForm.currentPassword}\r\n                onChange={handlePwdInputChange}\r\n                className=\"border p-2 rounded w-full text-sm sm:text-base\"\r\n                placeholder=\"Mật khẩu hiện tại\"\r\n              />\r\n              <input\r\n                ref={newPwdRef}\r\n                type=\"password\"\r\n                name=\"newPassword\"\r\n                value={pwdForm.newPassword}\r\n                onChange={handlePwdInputChange}\r\n                className=\"border p-2 rounded w-full text-sm sm:text-base\"\r\n                placeholder=\"Mật khẩu mới\"\r\n              />\r\n              <input\r\n                ref={confirmPwdRef}\r\n                type=\"password\"\r\n                name=\"confirmPassword\"\r\n                value={pwdForm.confirmPassword}\r\n                onChange={handlePwdInputChange}\r\n                className=\"border p-2 rounded w-full text-sm sm:text-base\"\r\n                placeholder=\"Nhập lại mật khẩu mới\"\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={handleChangePassword}\r\n              className=\"mt-4 bg-cyan-500 text-white px-4 sm:px-6 py-2 rounded-lg hover:bg-cyan-600 w-full sm:w-auto text-sm sm:text-base\"\r\n            >\r\n              Đổi mật khẩu\r\n            </button>\r\n          </div>\r\n        );\r\n\r\n      case 'settings':\r\n        return <h2 className=\"text-xl font-semibold mb-4\">Tùy chỉnh khác</h2>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-white\">\r\n      <Header />\r\n\r\n      <div className=\"w-full bg-gray-50\">\r\n        <main className=\"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-12 flex flex-col lg:flex-row gap-4 sm:gap-8 w-full\">\r\n          {/* Mobile Menu Button */}\r\n          <div className=\"lg:hidden mb-4\">\r\n            <button\r\n              onClick={() => setShowMobileMenu(!showMobileMenu)}\r\n              className=\"w-full bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center justify-between\"\r\n            >\r\n              <span>Menu tài khoản</span>\r\n              <svg\r\n                className={`w-5 h-5 transition-transform ${showMobileMenu ? 'rotate-180' : ''}`}\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Sidebar - Desktop & Mobile */}\r\n          <aside className={`\r\n          ${showMobileMenu ? 'block' : 'hidden'} \r\n          lg:block \r\n          w-full lg:w-64 \r\n          lg:border-r lg:pr-4 \r\n          mb-4 lg:mb-0\r\n        `}>\r\n            <h3 className=\"text-lg font-bold text-zinc-700 mb-4 hidden lg:block\">Tài khoản</h3>\r\n            <ul className=\"space-y-2\">\r\n              {menu.map(m => (\r\n                <li key={m.key}>\r\n                  <button\r\n                    onClick={() => handleMenuItemClick(m.key)}\r\n                    className={`\r\n                    w-full text-left px-3 py-2 rounded hover:bg-purple-100 text-sm sm:text-base\r\n                    ${activeTab === m.key ? 'bg-purple-200 font-semibold' : 'text-gray-700'}\r\n                  `}\r\n                  >\r\n                    {m.label}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n              <li>\r\n                <button\r\n                  onClick={handleLogout}\r\n                  className=\"w-full text-left px-3 py-2 rounded text-red-600 hover:bg-red-100 text-sm sm:text-base\"\r\n                >\r\n                  Đăng xuất\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </aside>\r\n\r\n          {/* Content Section */}\r\n          <section className=\"flex-1 min-w-0 bg-white rounded-xl shadow p-4 sm:p-6 border\">\r\n            {renderContent()}\r\n          </section>\r\n        </main>\r\n      </div>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\ResetPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\Terms.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\VNPayReturn.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\VerifyEmail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Analytics.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAnalyticsData'. Either include it or remove the dependency array.","line":23,"column":6,"nodeType":"ArrayExpression","endLine":23,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [dateRange, startDate, endDate, loadAnalyticsData]","fix":{"range":[1180,1211],"text":"[dateRange, startDate, endDate, loadAnalyticsData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { TrendingUp, Package, ShoppingCart, Users, DollarSign, AlertTriangle, CheckCircle, FileSpreadsheet, Calendar } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport type { AnalyticsSummary, OrderStatus, ProductSummary } from '../../types/types';\r\nimport { analyticsApi, productApi } from '../../utils/api';\r\n\r\ntype DateRange = 'today' | 'week' | 'month' | 'year' | 'custom';\r\n\r\nconst Analytics: React.FC = () => {\r\n  const [analytics, setAnalytics] = useState<AnalyticsSummary | null>(null);\r\n  const [products, setProducts] = useState<ProductSummary[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dateRange, setDateRange] = useState<DateRange>('month');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [showDateFilter, setShowDateFilter] = useState(false);\r\n\r\n  // Load analytics data from backend\r\n  useEffect(() => {\r\n    loadAnalyticsData();\r\n    loadProductsData();\r\n  }, [dateRange, startDate, endDate]);\r\n\r\n  const loadAnalyticsData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { start, end } = getDateRangeValues();\r\n      const data = await analyticsApi.getAnalyticsData({\r\n        startDate: start?.toISOString(),\r\n        endDate: end?.toISOString()\r\n      });\r\n      setAnalytics(data);\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadProductsData = async () => {\r\n    try {\r\n      const response = await productApi.getAll({ page: 0, size: 100 });\r\n      setProducts(response.content || []);\r\n    } catch (error) {\r\n      console.error('Error loading products:', error);\r\n    }\r\n  };\r\n\r\n  const getDateRangeValues = () => {\r\n    const now = new Date();\r\n    let start: Date;\r\n    let end: Date = now;\r\n\r\n    switch (dateRange) {\r\n      case 'today':\r\n        start = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n        break;\r\n      case 'week':\r\n        start = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n        break;\r\n      case 'month':\r\n        start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n        break;\r\n      case 'year':\r\n        start = new Date(now.getFullYear(), 0, 1);\r\n        break;\r\n      case 'custom':\r\n        if (!startDate || !endDate) return { start: null, end: null };\r\n        start = new Date(startDate);\r\n        end = new Date(endDate);\r\n        end.setHours(23, 59, 59, 999);\r\n        break;\r\n      default:\r\n        return { start: null, end: null };\r\n    }\r\n\r\n    return { start, end };\r\n  };\r\n\r\n  const getDateRangeLabel = () => {\r\n    const now = new Date();\r\n    switch (dateRange) {\r\n      case 'today':\r\n        return `Hôm nay (${now.toLocaleDateString('vi-VN')})`;\r\n      case 'week':\r\n        return 'Tuần này (7 ngày gần đây)';\r\n      case 'month':\r\n        return `Tháng này (${now.toLocaleDateString('vi-VN', { month: 'long', year: 'numeric' })})`;\r\n      case 'year':\r\n        return `Năm ${now.getFullYear()}`;\r\n      case 'custom':\r\n        if (startDate && endDate) {\r\n          return `${new Date(startDate).toLocaleDateString('vi-VN')} - ${new Date(endDate).toLocaleDateString('vi-VN')}`;\r\n        }\r\n        return 'Tùy chỉnh';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  const getOrderStatusLabel = (status: OrderStatus): string => {\r\n    const labels: Record<OrderStatus, string> = {\r\n      PENDING: 'Chờ xử lý',\r\n      CONFIRMED: 'Đã xác nhận',\r\n      WAITING_FOR_DELIVERY: 'Chờ giao',\r\n      IN_TRANSIT: 'Đang giao',\r\n      DELIVERED: 'Đã giao',\r\n      CANCELLED: 'Đã hủy'\r\n    };\r\n    return labels[status] || status;\r\n  };\r\n\r\n  // Prepare data for charts\r\n  const revenueChartData = analytics?.revenueTrend.map(point => ({\r\n    date: new Date(point.date).toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit' }),\r\n    revenue: point.revenue / 1000000, // Convert to millions\r\n    orders: point.orderCount\r\n  })) || [];\r\n\r\n  const orderStatusChartData = analytics?.orderStatusDistribution.map(dist => ({\r\n    name: getOrderStatusLabel(dist.status),\r\n    value: dist.count,\r\n    color: dist.status === 'DELIVERED' ? '#10b981' \r\n      : dist.status === 'CANCELLED' ? '#ef4444' \r\n      : '#f59e0b'\r\n  })) || [];\r\n\r\n  const topProductsChartData = analytics?.topProducts.map(product => ({\r\n    name: product.name.length > 20 ? product.name.substring(0, 20) + '...' : product.name,\r\n    sales: product.totalQuantitySold,\r\n    revenue: product.totalRevenue\r\n  })) || [];\r\n\r\n  // Product stock stats (separate from date filtering)\r\n  const productStats = {\r\n    totalProducts: products.length,\r\n    inStockProducts: products.filter(p => p.inStock).length,\r\n    outOfStockProducts: products.filter(p => !p.inStock).length\r\n  };\r\n\r\n  const handleExportExcel = () => {\r\n    if (!analytics) return;\r\n\r\n    try {\r\n      const wb = XLSX.utils.book_new();\r\n\r\n      // Sheet 1: Overview\r\n      const overviewData = [\r\n        ['BÁO CÁO THỐNG KÊ TỔNG QUAN'],\r\n        ['Khoảng thời gian', getDateRangeLabel()],\r\n        ['Ngày tạo báo cáo', new Date().toLocaleDateString('vi-VN')],\r\n        [],\r\n        ['CHỈ TIÊU', 'GIÁ TRỊ'],\r\n        ['Tổng doanh thu', `${analytics.totalRevenue.toLocaleString('vi-VN')} ₫`],\r\n        ['Tổng đơn hàng', analytics.totalOrders],\r\n        ['Đơn đang xử lý', analytics.pendingOrders],\r\n        ['Đơn hoàn thành', analytics.completedOrders],\r\n        ['Đơn bị hủy', analytics.cancelledOrders],\r\n        ['Giá trị đơn trung bình', `${analytics.avgOrderValue.toLocaleString('vi-VN')} ₫`],\r\n        ['Tổng sản phẩm', productStats.totalProducts],\r\n        ['Sản phẩm còn hàng', productStats.inStockProducts],\r\n        ['Sản phẩm hết hàng', productStats.outOfStockProducts],\r\n        ['Tổng người dùng', analytics.totalUsers],\r\n        ['Người dùng hoạt động', analytics.activeUsers],\r\n        ['Tỷ lệ chuyển đổi', `${analytics.conversionRate}%`],\r\n      ];\r\n      const wsOverview = XLSX.utils.aoa_to_sheet(overviewData);\r\n      wsOverview['!cols'] = [{ wch: 30 }, { wch: 25 }];\r\n      XLSX.utils.book_append_sheet(wb, wsOverview, 'Tổng quan');\r\n\r\n      // Sheet 2: Top Products\r\n      const productsData = [\r\n        ['TOP SẢN PHẨM BÁN CHẠY'],\r\n        [],\r\n        ['#', 'Tên sản phẩm', 'Số lượng bán', 'Doanh thu (₫)']\r\n      ];\r\n      analytics.topProducts.forEach((product, index) => {\r\n        productsData.push([\r\n          String(index + 1),\r\n          product.name,\r\n          String(product.totalQuantitySold),\r\n          product.totalRevenue.toLocaleString('vi-VN')\r\n        ]);\r\n      });\r\n      const wsProducts = XLSX.utils.aoa_to_sheet(productsData);\r\n      wsProducts['!cols'] = [{ wch: 5 }, { wch: 40 }, { wch: 15 }, { wch: 20 }];\r\n      XLSX.utils.book_append_sheet(wb, wsProducts, 'Top sản phẩm');\r\n\r\n      // Sheet 3: Revenue Trend\r\n      const revenueTrendData = [\r\n        ['BIỂU ĐỒ DOANH THU'],\r\n        [],\r\n        ['Ngày', 'Doanh thu (₫)', 'Số đơn hàng']\r\n      ];\r\n      analytics.revenueTrend.forEach(point => {\r\n        revenueTrendData.push([\r\n          point.date,\r\n          point.revenue.toLocaleString('vi-VN'),\r\n          String(point.orderCount)\r\n        ]);\r\n      });\r\n      const wsRevenue = XLSX.utils.aoa_to_sheet(revenueTrendData);\r\n      wsRevenue['!cols'] = [{ wch: 15 }, { wch: 20 }, { wch: 15 }];\r\n      XLSX.utils.book_append_sheet(wb, wsRevenue, 'Doanh thu');\r\n\r\n      // Export file\r\n      const dateLabel = dateRange === 'custom' && startDate && endDate\r\n        ? `${startDate}_${endDate}`\r\n        : dateRange === 'today' ? 'HomNay'\r\n        : dateRange === 'week' ? 'TuanNay'\r\n        : dateRange === 'month' ? 'ThangNay'\r\n        : dateRange === 'year' ? 'NamNay'\r\n        : 'TatCa';\r\n      \r\n      const fileName = `BaoCaoThongKe_${dateLabel}_${new Date().getTime()}.xlsx`;\r\n      XLSX.writeFile(wb, fileName);\r\n    } catch (error) {\r\n      console.error('Error exporting Excel:', error);\r\n      alert('Có lỗi xảy ra khi tạo báo cáo Excel. Vui lòng thử lại.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Đang tải dữ liệu thống kê...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!analytics || !analytics.hasData) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <AlertTriangle className=\"w-16 h-16 text-yellow-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">Không có dữ liệu</h3>\r\n          <p className=\"text-gray-600\">Không có dữ liệu thống kê trong khoảng thời gian đã chọn.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Thống kê & Phân tích</h2>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={() => setShowDateFilter(!showDateFilter)}\r\n            className=\"flex items-center gap-2 bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors\"\r\n          >\r\n            <Calendar className=\"w-4 h-4\" />\r\n            <span>{getDateRangeLabel()}</span>\r\n          </button>\r\n          <button\r\n            onClick={handleExportExcel}\r\n            className=\"flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\"\r\n          >\r\n            <FileSpreadsheet className=\"w-4 h-4\" />\r\n            <span>Xuất báo cáo Excel</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Date Filter Panel */}\r\n      {showDateFilter && (\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 mb-6 shadow-sm\">\r\n          <h3 className=\"text-sm font-semibold text-gray-700 mb-4\">Chọn khoảng thời gian</h3>\r\n          <div className=\"flex flex-wrap gap-3 mb-4\">\r\n            {(['today', 'week', 'month', 'year', 'custom'] as DateRange[]).map((range) => (\r\n              <button\r\n                key={range}\r\n                onClick={() => setDateRange(range)}\r\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                  dateRange === range\r\n                    ? 'bg-purple-600 text-white'\r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n              >\r\n                {range === 'today' ? 'Hôm nay' \r\n                  : range === 'week' ? 'Tuần này'\r\n                  : range === 'month' ? 'Tháng này'\r\n                  : range === 'year' ? 'Năm nay'\r\n                  : 'Tùy chỉnh'}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {dateRange === 'custom' && (\r\n            <div className=\"flex items-center gap-4 pt-4 border-t border-gray-200\">\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs font-medium text-gray-600 mb-2\">Từ ngày</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate}\r\n                  onChange={(e) => setStartDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-xs font-medium text-gray-600 mb-2\">Đến ngày</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate}\r\n                  onChange={(e) => setEndDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats Overview - Row 1 */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n        <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-purple-100\">Tổng doanh thu</span>\r\n            <DollarSign className=\"w-8 h-8 text-purple-200\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold mb-1\">{analytics.totalRevenue.toLocaleString('vi-VN')} ₫</p>\r\n          <p className=\"text-sm text-purple-100\">Từ {analytics.completedOrders} đơn đã giao</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-cyan-500 to-cyan-600 text-white rounded-xl p-6 shadow-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-cyan-100\">Tổng đơn hàng</span>\r\n            <ShoppingCart className=\"w-8 h-8 text-cyan-200\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold mb-1\">{analytics.totalOrders}</p>\r\n          <p className=\"text-sm text-cyan-100\">{analytics.pendingOrders} đơn đang xử lý</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 shadow-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-green-100\">Tổng sản phẩm</span>\r\n            <Package className=\"w-8 h-8 text-green-200\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold mb-1\">{productStats.totalProducts}</p>\r\n          <p className=\"text-sm text-green-100\">{productStats.inStockProducts} còn hàng</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 text-white rounded-xl p-6 shadow-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-orange-100\">Người dùng</span>\r\n            <Users className=\"w-8 h-8 text-orange-200\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold mb-1\">{analytics.totalUsers}</p>\r\n          <p className=\"text-sm text-orange-100\">{analytics.activeUsers} đang hoạt động</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Overview - Row 2 */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">Giá trị đơn TB</span>\r\n            <TrendingUp className=\"w-6 h-6 text-purple-600\" />\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-gray-800\">{analytics.avgOrderValue.toLocaleString('vi-VN')} ₫</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">Đơn hoàn thành</span>\r\n            <CheckCircle className=\"w-6 h-6 text-green-600\" />\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-gray-800\">{analytics.completedOrders}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">Đơn bị hủy</span>\r\n            <AlertTriangle className=\"w-6 h-6 text-red-600\" />\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-gray-800\">{analytics.cancelledOrders}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">Tỷ lệ chuyển đổi</span>\r\n            <TrendingUp className=\"w-6 h-6 text-cyan-600\" />\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-gray-800\">{analytics.conversionRate}%</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts - Row 1 */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Doanh thu theo ngày</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <AreaChart data={revenueChartData}>\r\n              <defs>\r\n                <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"#8b5cf6\" stopOpacity={0.8}/>\r\n                  <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0}/>\r\n                </linearGradient>\r\n              </defs>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"date\" />\r\n              <YAxis />\r\n              <Tooltip formatter={(value: number) => `${value.toFixed(2)} triệu ₫`} />\r\n              <Area type=\"monotone\" dataKey=\"revenue\" stroke=\"#8b5cf6\" fillOpacity={1} fill=\"url(#colorRevenue)\" />\r\n            </AreaChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Phân bố trạng thái đơn hàng</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <PieChart>\r\n              <Pie\r\n                data={orderStatusChartData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                labelLine={false}\r\n                label={(entry) => `${entry.name}: ${entry.value}`}\r\n                outerRadius={100}\r\n                fill=\"#8884d8\"\r\n                dataKey=\"value\"\r\n              >\r\n                {orderStatusChartData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts - Row 2 */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Top 5 sản phẩm bán chạy</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={topProductsChartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"name\" />\r\n              <YAxis />\r\n              <Tooltip />\r\n              <Bar dataKey=\"sales\" fill=\"#10b981\" name=\"Số lượng bán\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Số đơn hàng theo ngày</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={revenueChartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"date\" />\r\n              <YAxis />\r\n              <Tooltip />\r\n              <Line type=\"monotone\" dataKey=\"orders\" stroke=\"#06b6d4\" strokeWidth={2} name=\"Số đơn\" />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Top Products Table */}\r\n      <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Top sản phẩm bán chạy</h3>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-200\">\r\n                <th className=\"text-left py-3 px-4 text-sm font-semibold text-gray-700\">#</th>\r\n                <th className=\"text-left py-3 px-4 text-sm font-semibold text-gray-700\">Sản phẩm</th>\r\n                <th className=\"text-right py-3 px-4 text-sm font-semibold text-gray-700\">Số lượng bán</th>\r\n                <th className=\"text-right py-3 px-4 text-sm font-semibold text-gray-700\">Doanh thu</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {analytics.topProducts.map((product, index) => (\r\n                <tr key={product.id} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                  <td className=\"py-3 px-4 text-sm text-gray-600\">{index + 1}</td>\r\n                  <td className=\"py-3 px-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <img\r\n                        src={product.thumbnailUrl || '/placeholder.png'}\r\n                        alt={product.name}\r\n                        className=\"w-12 h-12 object-cover rounded\"\r\n                      />\r\n                      <span className=\"text-sm font-medium text-gray-800\">{product.name}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right text-sm text-gray-800 font-medium\">\r\n                    {product.totalQuantitySold}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right text-sm text-gray-800 font-medium\">\r\n                    {product.totalRevenue.toLocaleString('vi-VN')} ₫\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Analytics;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Articles.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'articles' logical expression could make the dependencies of useMemo Hook (at line 56) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'articles' in its own useMemo() Hook.","line":15,"column":9,"nodeType":"VariableDeclarator","endLine":15,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":245,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":245,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Plus, Edit, Trash2, Eye, FileText, X, Search } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport { ArticleApi } from '../../utils/api';\r\nimport type { Article } from '../../types/types';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\nimport ArticleModal from '../../components/admin-modal/ArticleModal';\r\n\r\ntype Props = { \r\n  data?: Article[];\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Articles: React.FC<Props> = ({ data, onReload }) => {\r\n  const articles = data || [];\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all');\r\n  const [confirmDialog, setConfirmDialog] = useState<{\r\n    open: boolean;\r\n    article?: Article;\r\n  }>({ open: false });\r\n\r\n  const [articleModal, setArticleModal] = useState<{\r\n    open: boolean;\r\n    article?: Article;\r\n  }>({ open: false });\r\n\r\n  const [viewModal, setViewModal] = useState<{\r\n    open: boolean;\r\n    article?: Article;\r\n  }>({ open: false });\r\n\r\n  const filteredArticles = useMemo(() => {\r\n    let filtered = articles;\r\n\r\n    // Tìm kiếm theo tiêu đề, nội dung, tác giả\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((article: Article) => \r\n        article.title.toLowerCase().includes(searchLower) ||\r\n        article.content.toLowerCase().includes(searchLower) ||\r\n        (article.adminName && article.adminName.toLowerCase().includes(searchLower))\r\n      );\r\n    }\r\n\r\n    // Lọc theo trạng thái\r\n    if (statusFilter !== 'all') {\r\n      filtered = filtered.filter((article: Article) => {\r\n        if (statusFilter === 'active') return article.active;\r\n        if (statusFilter === 'inactive') return !article.active;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [articles, searchTerm, statusFilter]);\r\n\r\n  const handleDeleteArticle = (article: Article) => {\r\n    setConfirmDialog({ open: true, article });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!confirmDialog.article) return;\r\n\r\n    try {\r\n      await ArticleApi.delete(confirmDialog.article.id);\r\n      toast.success('Đã xóa bài viết thành công');\r\n      setConfirmDialog({ open: false });\r\n      onReload?.();\r\n    } catch (error: any) {\r\n      console.error('Error deleting article:', error);\r\n      if (error.response?.status === 401) {\r\n        toast.error('Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.');\r\n      } else if (error.response?.status === 403) {\r\n        toast.error('Bạn không có quyền thực hiện thao tác này.');\r\n      } else {\r\n        toast.error('Có lỗi xảy ra khi xóa bài viết');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreateArticle = () => {\r\n    setArticleModal({ open: true });\r\n  };\r\n\r\n  const handleEditArticle = (article: Article) => {\r\n    setArticleModal({ open: true, article });\r\n  };\r\n\r\n  const handleViewArticle = (article: Article) => {\r\n    setViewModal({ open: true, article });\r\n  };\r\n\r\n  const handleArticleModalSuccess = () => {\r\n    onReload?.();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý bài viết</h2>\r\n        <button \r\n          onClick={handleCreateArticle}\r\n          className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-cyan-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Thêm bài viết</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search and Filter Bar */}\r\n      <div className=\"mb-6 flex gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo tiêu đề, nội dung, tác giả...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value as 'all' | 'active' | 'inactive')}\r\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n        >\r\n          <option value=\"all\">Tất cả trạng thái</option>\r\n          <option value=\"active\">Đã xuất bản</option>\r\n          <option value=\"inactive\">Nháp</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {filteredArticles.length > 0 ? (\r\n          filteredArticles.map((article: Article) => (\r\n            <div key={article.id} className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex gap-4 flex-1\">\r\n                  <div className=\"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                    <FileText className=\"w-6 h-6 text-cyan-600\" />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-semibold text-zinc-800 mb-2\">{article.title}</h3>\r\n                    <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">{article.content.substring(0, 150)}...</p>\r\n                    <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                      <span>Tác giả: {article.adminName || 'Admin'}</span>\r\n                      <span>•</span>\r\n                      <span>{article.publishedAt ? new Date(article.publishedAt).toLocaleDateString('vi-VN') : 'Chưa xuất bản'}</span>\r\n                      <span>•</span>\r\n                      <span className={`px-2 py-1 rounded ${article.active ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}`}>\r\n                        {article.active ? 'Đã xuất bản' : 'Nháp'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button \r\n                    onClick={() => handleViewArticle(article)}\r\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Eye className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button \r\n                    onClick={() => handleEditArticle(article)}\r\n                    className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button \r\n                    onClick={() => handleDeleteArticle(article)}\r\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 text-gray-500\">\r\n            {searchTerm || statusFilter !== 'all' ? 'Không tìm thấy bài viết phù hợp' : 'Chưa có bài viết nào'}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Confirm Dialog */}\r\n      <ConfirmDialog\r\n        open={confirmDialog.open}\r\n        title=\"Xác nhận xóa bài viết\"\r\n        message={`Bạn có chắc chắn muốn xóa bài viết \"${confirmDialog.article?.title}\"? Hành động này không thể hoàn tác.`}\r\n        confirmText=\"Xóa bài viết\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setConfirmDialog({ open: false })}\r\n      />\r\n\r\n      {/* Article Modal */}\r\n      <ArticleModal\r\n        isOpen={articleModal.open}\r\n        onClose={() => setArticleModal({ open: false })}\r\n        article={articleModal.article}\r\n        onSuccess={handleArticleModalSuccess}\r\n      />\r\n\r\n      {/* View Article Modal */}\r\n      {viewModal.open && viewModal.article && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-zinc-800\">Xem bài viết</h3>\r\n              <button\r\n                onClick={() => setViewModal({ open: false })}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              <h1 className=\"text-2xl font-bold text-zinc-800 mb-4\">{viewModal.article.title}</h1>\r\n              <div className=\"flex items-center gap-4 text-sm text-gray-500 mb-6\">\r\n                <span>Tác giả: {viewModal.article.adminName || 'Admin'}</span>\r\n                <span>•</span>\r\n                <span>{viewModal.article.publishedAt ? new Date(viewModal.article.publishedAt).toLocaleDateString('vi-VN') : 'Chưa xuất bản'}</span>\r\n                <span>•</span>\r\n                <span className={`px-2 py-1 rounded ${viewModal.article.active ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}`}>\r\n                  {viewModal.article.active ? 'Đã xuất bản' : 'Nháp'}\r\n                </span>\r\n              </div>\r\n              <div className=\"prose max-w-none\">\r\n                <div className=\"whitespace-pre-wrap text-gray-700 leading-relaxed\">\r\n                  {viewModal.article.content}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Articles;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const result = await ArticleApi.getAll({ size: 100 }); // Get more articles for admin view\r\n    return result.content || result;\r\n  } catch (error) {\r\n    console.error('Error loading articles:', error);\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Brands.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'brands' logical expression could make the dependencies of useMemo Hook (at line 31) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'brands' in its own useMemo() Hook.","line":15,"column":9,"nodeType":"VariableDeclarator","endLine":15,"endColumn":37},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":142,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":142,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Plus, Edit, Trash2, Tag, Search } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport { brandApi } from '../../utils/api';\r\nimport type { Brand } from '../../types/types';\r\nimport BrandModal from '../../components/admin-modal/BrandModal';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\n\r\ntype Props = { \r\n  data?: { content: Brand[]; page: { totalPages: number; totalElements: number } };\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Brands: React.FC<Props> = ({ data, onReload }) => {\r\n  const brands = data?.content || [];\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editingBrand, setEditingBrand] = useState<Brand | undefined>();\r\n  const [confirmDialog, setConfirmDialog] = useState<{\r\n    open: boolean;\r\n    brand?: Brand;\r\n  }>({ open: false });\r\n\r\n  const filteredBrands = useMemo(() => {\r\n    if (!searchTerm.trim()) return brands;\r\n    \r\n    const searchLower = searchTerm.toLowerCase();\r\n    return brands.filter((brand: Brand) => \r\n      brand.name.toLowerCase().includes(searchLower)\r\n    );\r\n  }, [brands, searchTerm]);\r\n\r\n  const handleAddBrand = () => {\r\n    setEditingBrand(undefined);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEditBrand = (brand: Brand) => {\r\n    setEditingBrand(brand);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteBrand = (brand: Brand) => {\r\n    setConfirmDialog({ open: true, brand });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!confirmDialog.brand) return;\r\n\r\n    try {\r\n      await brandApi.delete(confirmDialog.brand.id.toString());\r\n      toast.success('Xóa thương hiệu thành công!');\r\n      onReload?.();\r\n    } catch (error) {\r\n      console.error('Error deleting brand:', error);\r\n      alert('Có lỗi xảy ra khi xóa thương hiệu. Vui lòng thử lại.');\r\n    } finally {\r\n      setConfirmDialog({ open: false });\r\n    }\r\n  };\r\n\r\n  const handleModalSuccess = () => {\r\n    onReload?.();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý thương hiệu</h2>\r\n        <button className=\"flex items-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\" onClick={handleAddBrand}>\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Thêm thương hiệu</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo tên thương hiệu...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {filteredBrands.length > 0 ? (\r\n          filteredBrands.map((brand: Brand) => (\r\n            <div key={brand.id} className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center\">\r\n                  <Tag className=\"w-6 h-6 text-cyan-600\" />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button className=\"p-2 text-cyan-600 hover:bg-cyan-50 rounded-lg transition-colors\" onClick={() => handleEditBrand(brand)}>\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\" onClick={() => handleDeleteBrand(brand)}>\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-zinc-800 mb-2\">{brand.name}</h3>\r\n              <p className=\"text-sm text-gray-500\">{brand.productCount || 0} sản phẩm</p>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-span-full text-center py-12 text-gray-500\">\r\n            {searchTerm ? 'Không tìm thấy thương hiệu phù hợp' : 'Chưa có thương hiệu nào'}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Brand Modal */}\r\n      <BrandModal\r\n        isOpen={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        brand={editingBrand}\r\n        onSuccess={handleModalSuccess}\r\n      />\r\n\r\n      {/* Confirm Dialog */}\r\n      <ConfirmDialog\r\n        open={confirmDialog.open}\r\n        title=\"Xác nhận xóa thương hiệu\"\r\n        message={`Bạn có chắc chắn muốn xóa thương hiệu \"${confirmDialog.brand?.name}\"? Hành động này không thể hoàn tác.`}\r\n        confirmText=\"Xóa\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setConfirmDialog({ open: false })}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Brands;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const result = await brandApi.getAll({ page: 0, size: 100 });\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Error loading brands:', error);\r\n    return { content: [], page: { totalPages: 0, totalElements: 0 } };\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Categories.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'categories' logical expression could make the dependencies of useMemo Hook (at line 33) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'categories' in its own useMemo() Hook.","line":16,"column":9,"nodeType":"VariableDeclarator","endLine":16,"endColumn":32},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":167,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":167,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Plus, Edit, Trash2, FolderTree, Search } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport { categoryApi } from '../../utils/api';\r\nimport { imageUploadService } from '../../utils/imageUploadService';\r\nimport type { CategorySummary } from '../../types/types';\r\nimport CategoryModal from '../../components/admin-modal/CategoryModal';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\n\r\ntype Props = { \r\n  data?: CategorySummary[];\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Categories: React.FC<Props> = ({ data, onReload }) => {\r\n  const categories = data || [];\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editingCategory, setEditingCategory] = useState<CategorySummary | undefined>();\r\n  const [confirmDialog, setConfirmDialog] = useState<{\r\n    open: boolean;\r\n    category?: CategorySummary;\r\n  }>({ open: false });\r\n\r\n  const filteredCategories = useMemo(() => {\r\n    if (!searchTerm.trim()) return categories;\r\n    \r\n    const searchLower = searchTerm.toLowerCase();\r\n    return categories.filter((category: CategorySummary) => \r\n      category.name.toLowerCase().includes(searchLower) ||\r\n      (category.description && category.description.toLowerCase().includes(searchLower))\r\n    );\r\n  }, [categories, searchTerm]);\r\n\r\n  const handleAddCategory = () => {\r\n    setEditingCategory(undefined);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEditCategory = (category: CategorySummary) => {\r\n    setEditingCategory(category);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteCategory = (category: CategorySummary) => {\r\n    setConfirmDialog({ open: true, category });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!confirmDialog.category) return;\r\n\r\n    try {\r\n      await categoryApi.delete(confirmDialog.category.id.toString());\r\n\r\n      if (confirmDialog.category.imageUrl) {\r\n        try {\r\n          await imageUploadService.deleteImage(confirmDialog.category.imageUrl);\r\n        } catch (imageError) {\r\n          console.error('Error deleting category image:', imageError);\r\n        }\r\n      }\r\n\r\n      toast.success('Xóa danh mục thành công!');\r\n      onReload?.();\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      alert('Có lỗi xảy ra khi xóa danh mục. Vui lòng thử lại.');\r\n    } finally {\r\n      setConfirmDialog({ open: false });\r\n    }\r\n  };\r\n\r\n  const handleModalSuccess = () => {\r\n    onReload?.();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý danh mục</h2>\r\n        <button className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-cyan-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\" onClick={handleAddCategory}>\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Thêm danh mục</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo tên hoặc mô tả danh mục...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {filteredCategories.length > 0 ? (\r\n          filteredCategories.map((category: CategorySummary) => (\r\n            <div key={category.id} className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center overflow-hidden\">\r\n                  {category.imageUrl ? (\r\n                    <img \r\n                      src={category.imageUrl} \r\n                      alt={category.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                      onError={(e) => {\r\n                        e.currentTarget.style.display = 'none';\r\n                        e.currentTarget.nextElementSibling?.classList.remove('hidden');\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n                  <FolderTree className={`w-6 h-6 text-purple-600 ${category.imageUrl ? 'hidden' : ''}`} />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\" onClick={() => handleEditCategory(category)}>\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\" onClick={() => handleDeleteCategory(category)}>\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-zinc-800 mb-2\">{category.name}</h3>\r\n              <p className=\"text-sm text-gray-600 mb-2\">\r\n                <strong>Mô tả:</strong> {category.description || 'Chưa có mô tả'}\r\n              </p>\r\n              <p className=\"text-sm text-gray-500\">Trạng thái: {(category as any).status || (category.active ? 'Hoạt động' : 'Không hoạt động')}</p>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-span-full text-center py-12 text-gray-500\">\r\n            {searchTerm ? 'Không tìm thấy danh mục phù hợp' : 'Chưa có danh mục nào'}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Category Modal */}\r\n      <CategoryModal\r\n        isOpen={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        category={editingCategory}\r\n        onSuccess={handleModalSuccess}\r\n      />\r\n\r\n      {/* Confirm Dialog */}\r\n      <ConfirmDialog\r\n        open={confirmDialog.open}\r\n        title=\"Xác nhận xóa danh mục\"\r\n        message={`Bạn có chắc chắn muốn xóa danh mục \"${confirmDialog.category?.name}\"? Hành động này không thể hoàn tác.`}\r\n        confirmText=\"Xóa\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setConfirmDialog({ open: false })}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Categories;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const result = await categoryApi.getAllForAdmin();\r\n    return (result as any).content || result;\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Dashboard.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":153,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":153,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Users, Package, ShoppingCart, TrendingUp, UserPlus, MessageSquare, FileText, AlertTriangle, CheckCircle } from 'lucide-react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip as RechartsTooltip, ResponsiveContainer } from 'recharts';\r\n\r\ntype Props = {\r\n  data?: any;\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Dashboard: React.FC<Props> = ({ data }) => {\r\n  const stats = data?.stats || { users: 0, orders: 0, revenue: 0, products: 0 };\r\n  const activities = data?.activities || [];\r\n  const revenueChartData = data?.revenueChartData || [];\r\n\r\n  const getActivityIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'order':\r\n        return <ShoppingCart className=\"w-5 h-5 text-cyan-600\" />;\r\n      case 'user':\r\n        return <UserPlus className=\"w-5 h-5 text-purple-600\" />;\r\n      case 'ticket':\r\n        return <MessageSquare className=\"w-5 h-5 text-pink-600\" />;\r\n      case 'article':\r\n        return <FileText className=\"w-5 h-5 text-green-600\" />;\r\n      case 'alert':\r\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />;\r\n      default:\r\n        return <CheckCircle className=\"w-5 h-5 text-gray-600\" />;\r\n    }\r\n  };\r\n\r\n  const getActivityBg = (type: string) => {\r\n    switch (type) {\r\n      case 'order':\r\n        return 'bg-cyan-50';\r\n      case 'user':\r\n        return 'bg-purple-50';\r\n      case 'ticket':\r\n        return 'bg-pink-50';\r\n      case 'article':\r\n        return 'bg-green-50';\r\n      case 'alert':\r\n        return 'bg-yellow-50';\r\n      default:\r\n        return 'bg-gray-50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold text-zinc-800 mb-6\">Tổng quan hệ thống</h2>\r\n\r\n      {/* Stats Grid */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\r\n              <Users className=\"w-6 h-6\" />\r\n            </div>\r\n            <TrendingUp className=\"w-5 h-5 opacity-80\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold mb-1\">{stats.users}</h3>\r\n          <p className=\"text-purple-100 text-sm\">Người dùng</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\r\n              <ShoppingCart className=\"w-6 h-6\" />\r\n            </div>\r\n            <TrendingUp className=\"w-5 h-5 opacity-80\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold mb-1\">{stats.orders}</h3>\r\n          <p className=\"text-cyan-100 text-sm\">Đơn hàng</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\r\n              <Package className=\"w-6 h-6\" />\r\n            </div>\r\n            <TrendingUp className=\"w-5 h-5 opacity-80\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold mb-1\">{stats.products || 0}</h3>\r\n          <p className=\"text-pink-100 text-sm\">Sản phẩm</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\r\n              <span className=\"text-xl\">₫</span>\r\n            </div>\r\n            <TrendingUp className=\"w-5 h-5 opacity-80\" />\r\n          </div>\r\n          <h3 className=\"text-3xl font-bold mb-1\">{stats.revenue.toLocaleString()}</h3>\r\n          <p className=\"text-green-100 text-sm\">Doanh thu (VNĐ)</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts and Recent Activity */}\r\n      <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8\">\r\n        <div className=\"bg-white border text-black border-gray-200 rounded-xl p-6 xl:col-span-2\">\r\n          <h3 className=\"text-lg font-semibold text-zinc-800 mb-4\">Doanh thu 7 ngày qua</h3>\r\n          <div className=\"h-80\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={revenueChartData} margin={{ top: 10, right: 10, left: 20, bottom: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e5e7eb\" />\r\n                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#6b7280', fontSize: 12 }} dy={10} />\r\n                <YAxis dataKey=\"revenue\" axisLine={false} tickLine={false} tick={{ fill: '#6b7280', fontSize: 12 }} tickFormatter={(value) => `${(value / 1000).toLocaleString()}k`} width={60} />\r\n                <RechartsTooltip\r\n                  formatter={(value: number) => [`${value.toLocaleString()} ₫`, 'Doanh thu']}\r\n                  cursor={{ fill: '#f3f4f6' }}\r\n                  contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)' }}\r\n                />\r\n                <Bar dataKey=\"revenue\" fill=\"#14b8a6\" radius={[4, 4, 0, 0]} maxBarSize={50} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Activity */}\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 h-full overflow-y-auto\" style={{ maxHeight: '400px' }}>\r\n          <h3 className=\"text-lg font-semibold text-zinc-800 mb-4\">Hoạt động gần đây</h3>\r\n          {activities.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              {activities.map((activity: any, index: number) => (\r\n                <div\r\n                  key={index}\r\n                  className={`flex items-start gap-4 p-4 rounded-lg ${getActivityBg(activity.type)} hover:shadow-sm transition-shadow`}\r\n                >\r\n                  <div className=\"flex-shrink-0 mt-1\">\r\n                    {getActivityIcon(activity.type)}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm font-medium text-zinc-800\">{activity.title}</p>\r\n                    <p className=\"text-xs text-gray-600 mt-1\">{activity.description}</p>\r\n                    <p className=\"text-xs text-gray-500 mt-2\">{activity.time}</p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-500 text-center py-8\">Chưa có dữ liệu hoạt động</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const { orderApi, productApi, userApi, InventoryApi } = await import('../../utils/api');\r\n\r\n    const [ordersResponse, productsResponse, usersResponse, inventoriesResponse] = await Promise.all([\r\n      orderApi.getAll({ page: 0, size: 20 }),\r\n      productApi.getAll({ page: 0, size: 20 }),\r\n      userApi.getAllUsers(),\r\n      InventoryApi.getAll().catch((err) => {\r\n        console.error('Inventory API error:', err);\r\n        return { content: [] };\r\n      })\r\n    ]);\r\n\r\n    const orders = ordersResponse.content || ordersResponse || [];\r\n    const products = productsResponse.content || [];\r\n    const users = usersResponse.content || usersResponse || [];\r\n    const inventories = inventoriesResponse.content || [];\r\n\r\n    // Tính toán thống kê\r\n    const totalUsers = users.length;\r\n    const totalOrders = await orderApi.countOrders();\r\n    const totalProducts = await productApi.countProducts();\r\n\r\n    // Doanh thu từ đơn đã giao và đã thanh toán\r\n    const totalRevenue = orders\r\n      .filter((o: any) => o.status === 'DELIVERED' && o.paymentStatus === 'PAID')\r\n      .reduce((sum: number, o: any) => sum + (o.grandTotal || 0), 0);\r\n\r\n    // Tạo hoạt động gần đây từ dữ liệu thực\r\n    const activities: Array<{ type: string; title: string; description: string; time: string }> = [];\r\n\r\n    // Đơn hàng gần đây\r\n    const recentOrders = [...orders]\r\n      .sort((a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n      .slice(0, 3);\r\n\r\n    recentOrders.forEach((order: any) => {\r\n      const timeAgo = getTimeAgo(order.createdAt);\r\n      const statusText =\r\n        order.status === 'DELIVERED' ? 'đã giao' :\r\n          order.status === 'PENDING' ? 'mới' :\r\n            order.status === 'CANCELLED' ? 'đã hủy' : 'đang xử lý';\r\n\r\n      activities.push({\r\n        type: 'order',\r\n        title: `Đơn hàng ${statusText} #${order.id.slice(0, 8)}`,\r\n        description: `${order.user?.name || 'Khách hàng'} - Tổng tiền: ${order.grandTotal?.toLocaleString('vi-VN')} ₫`,\r\n        time: timeAgo\r\n      });\r\n    });\r\n\r\n    // Người dùng mới\r\n    const recentUsers = [...users]\r\n      .sort((a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n      .slice(0, 2);\r\n\r\n    recentUsers.forEach((user: any) => {\r\n      const timeAgo = getTimeAgo(user.createdAt);\r\n      activities.push({\r\n        type: 'user',\r\n        title: 'Người dùng mới đăng ký',\r\n        description: `${user.name} (${user.email})`,\r\n        time: timeAgo\r\n      });\r\n    });\r\n\r\n    if (inventories.length > 0) {\r\n      const lowStockItems = inventories.filter((inv: any) =>\r\n        inv.quantity < 10 && inv.quantity > 0\r\n      ).slice(0, 2);\r\n\r\n      lowStockItems.forEach((inv: any) => {\r\n        activities.push({\r\n          type: 'alert',\r\n          title: 'Cảnh báo tồn kho',\r\n          description: `Sản phẩm có SKU \"${inv.productId}\" sắp hết hàng (còn ${inv.quantity} sản phẩm)`,\r\n          time: 'Hiện tại'\r\n        });\r\n      });\r\n\r\n      const outOfStockItems = inventories.filter((inv: any) =>\r\n        inv.quantity === 0\r\n      ).slice(0, 2);\r\n\r\n      outOfStockItems.forEach((inv: any) => {\r\n        activities.push({\r\n          type: 'alert',\r\n          title: 'Sản phẩm đã hết hàng',\r\n          description: `Sản phẩm có SKU \"${inv.productId}\" đã hết hàng - cần nhập thêm`,\r\n          time: 'Hiện tại'\r\n        });\r\n      });\r\n    } else if (products.length > 0) {\r\n      // Fallback: Sử dụng dữ liệu từ Products API\r\n      const outOfStockProducts = products.filter((p: any) => !p.inStock).slice(0, 3);\r\n\r\n      outOfStockProducts.forEach((product: any) => {\r\n        activities.push({\r\n          type: 'alert',\r\n          title: 'Sản phẩm đã hết hàng',\r\n          description: `${product.name} (SKU: ${product.sku}) đã hết hàng - cần nhập thêm`,\r\n          time: 'Hiện tại'\r\n        });\r\n      });\r\n\r\n      const lowStockProducts = products.filter((p: any) =>\r\n        p.inStock && p.stockQuantity != null && p.stockQuantity < 10\r\n      ).slice(0, 2);\r\n\r\n      lowStockProducts.forEach((product: any) => {\r\n        activities.push({\r\n          type: 'alert',\r\n          title: 'Cảnh báo tồn kho',\r\n          description: `${product.name} sắp hết hàng (còn ${product.stockQuantity || 'ít'} sản phẩm)`,\r\n          time: 'Hiện tại'\r\n        });\r\n      });\r\n    }\r\n\r\n    activities.sort((a: any, b: any) => {\r\n      const timeOrder: any = {\r\n        'vừa xong': 0,\r\n        'Hiện tại': 0,\r\n      };\r\n      const aOrder = timeOrder[a.time] ?? parseTimeAgo(a.time);\r\n      const bOrder = timeOrder[b.time] ?? parseTimeAgo(b.time);\r\n      return aOrder - bOrder;\r\n    });\r\n\r\n    const revenueByDay: Record<string, number> = {};\r\n    const last7Days = Array.from({ length: 7 }, (_, i) => {\r\n      const d = new Date();\r\n      d.setDate(d.getDate() - (6 - i));\r\n      return d.toISOString().split('T')[0];\r\n    });\r\n\r\n    last7Days.forEach(date => {\r\n      revenueByDay[date] = 0;\r\n    });\r\n\r\n    orders.forEach((o: any) => {\r\n      if (o.status === 'DELIVERED' && o.paymentStatus === 'PAID' && o.createdAt) {\r\n        const date = o.createdAt.split('T')[0];\r\n        if (revenueByDay[date] !== undefined) {\r\n          revenueByDay[date] += (o.grandTotal || 0);\r\n        }\r\n      }\r\n    });\r\n\r\n    const revenueChartData = last7Days.map(date => {\r\n      const parts = date.split('-');\r\n      return {\r\n        name: `${parts[2]}/${parts[1]}`, // DD/MM\r\n        revenue: revenueByDay[date]\r\n      };\r\n    });\r\n\r\n    return {\r\n      stats: {\r\n        users: totalUsers,\r\n        orders: totalOrders,\r\n        revenue: totalRevenue,\r\n        products: totalProducts\r\n      },\r\n      activities: activities.slice(0, 8),\r\n      revenueChartData\r\n    };\r\n  } catch (error) {\r\n    console.error('Error loading dashboard data:', error);\r\n    return {\r\n      stats: { users: 0, orders: 0, revenue: 0, products: 0 },\r\n      activities: []\r\n    };\r\n  }\r\n}\r\n\r\nfunction getTimeAgo(dateString: string): string {\r\n  const now = new Date();\r\n  const past = new Date(dateString);\r\n  const diffMs = now.getTime() - past.getTime();\r\n  const diffMins = Math.floor(diffMs / 60000);\r\n  const diffHours = Math.floor(diffMs / 3600000);\r\n  const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n  if (diffMins < 1) return 'vừa xong';\r\n  if (diffMins < 60) return `${diffMins} phút trước`;\r\n  if (diffHours < 24) return `${diffHours} giờ trước`;\r\n  if (diffDays < 7) return `${diffDays} ngày trước`;\r\n  return past.toLocaleDateString('vi-VN');\r\n}\r\n\r\nfunction parseTimeAgo(timeStr: string): number {\r\n  if (timeStr === 'vừa xong' || timeStr === 'Hiện tại') return 0;\r\n  const match = timeStr.match(/(\\d+)\\s*(phút|giờ|ngày)/);\r\n  if (!match) return 999999;\r\n  const value = parseInt(match[1]);\r\n  const unit = match[2];\r\n  if (unit === 'phút') return value;\r\n  if (unit === 'giờ') return value * 60;\r\n  if (unit === 'ngày') return value * 1440;\r\n  return 999999;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Discount.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'discounts' logical expression could make the dependencies of useMemo Hook (at line 45) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'discounts' in its own useMemo() Hook.","line":13,"column":9,"nodeType":"VariableDeclarator","endLine":13,"endColumn":31},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":223,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":223,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from \"react\";\r\nimport { Plus, Edit, Percent, Calendar, Search } from \"lucide-react\";\r\nimport { DiscountApi } from \"../../utils/api\";\r\nimport type { Discount } from \"../../types/types\";\r\nimport DiscountModal from \"../../components/admin-modal/DiscountModal\";\r\n\r\ntype Props = {\r\n  data?: Discount[];\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Promotions: React.FC<Props> = ({ data, onReload }) => {\r\n  const discounts = data || [];\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<\r\n    \"all\" | \"active\" | \"inactive\"\r\n  >(\"all\");\r\n\r\n  const [discountModal, setDiscountModal] = useState<{\r\n    open: boolean;\r\n    discount?: Discount;\r\n  }>({ open: false });\r\n\r\n  const filteredDiscounts = useMemo(() => {\r\n    let filtered = discounts;\r\n\r\n    // Tìm kiếm theo mã khuyến mãi\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((discount: Discount) =>\r\n        discount.code.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    // Lọc theo trạng thái\r\n    if (statusFilter !== \"all\") {\r\n      filtered = filtered.filter((discount: Discount) => {\r\n        if (statusFilter === \"active\") return discount.active;\r\n        if (statusFilter === \"inactive\") return !discount.active;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [discounts, searchTerm, statusFilter]);\r\n\r\n  // const handleDeleteDiscount = (discount: Discount) => {\r\n  //   setConfirmDialog({ open: true, discount });\r\n  // };\r\n\r\n  // const confirmDelete = async () => {\r\n  //   if (!confirmDialog.discount) return;\r\n\r\n  //   try {\r\n  //     await DiscountApi.delete(confirmDialog.discount.id);\r\n  //     toast.success('Đã xóa khuyến mãi thành công');\r\n  //     setConfirmDialog({ open: false });\r\n  //     onReload?.();\r\n  //   } catch (error: any) {\r\n  //     console.error('Error deleting discount:', error);\r\n  //     if (error.response?.status === 401) {\r\n  //       toast.error('Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.');\r\n  //     } else if (error.response?.status === 403) {\r\n  //       toast.error('Bạn không có quyền thực hiện thao tác này.');\r\n  //     } else {\r\n  //       toast.error('Có lỗi xảy ra khi xóa khuyến mãi');\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  const handleCreateDiscount = () => {\r\n    setDiscountModal({ open: true });\r\n  };\r\n\r\n  const handleEditDiscount = (discount: Discount) => {\r\n    setDiscountModal({ open: true, discount });\r\n  };\r\n\r\n  const handleDiscountModalSuccess = () => {\r\n    onReload?.();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý khuyến mãi</h2>\r\n        <button\r\n          onClick={handleCreateDiscount}\r\n          className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-cyan-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Thêm khuyến mãi</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search and Filter Bar */}\r\n      <div className=\"mb-6 flex gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo mã khuyến mãi...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) =>\r\n            setStatusFilter(e.target.value as \"all\" | \"active\" | \"inactive\")\r\n          }\r\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n        >\r\n          <option value=\"all\">Tất cả trạng thái</option>\r\n          <option value=\"active\">Đang hoạt động</option>\r\n          <option value=\"inactive\">Không hoạt động</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {filteredDiscounts.length > 0 ? (\r\n          filteredDiscounts.map((discount: Discount) => (\r\n            <div\r\n              key={discount.id}\r\n              className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\"\r\n            >\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex gap-4\">\r\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                    <Percent className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-zinc-800 mb-2\">\r\n                      {discount.code}\r\n                    </h3>\r\n                    <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                      <span className=\"flex items-center gap-1\">\r\n                        <Percent className=\"w-4 h-4\" />\r\n                        {discount.discountType === \"PERCENT\"\r\n                          ? `${discount.discountValue}%`\r\n                          : discount.discountType === \"FIXED_AMOUNT\"\r\n                          ? `${discount.discountValue.toLocaleString(\"vi-VN\")}₫`\r\n                          : \"Miễn phí vận chuyển\"}\r\n                      </span>\r\n                      <span className=\"flex items-center gap-1\">\r\n                        <Calendar className=\"w-4 h-4\" />\r\n                        {new Date(discount.startAt).toLocaleDateString(\r\n                          \"vi-VN\"\r\n                        )}{\" \"}\r\n                        - {new Date(discount.endAt).toLocaleDateString(\"vi-VN\")}\r\n                      </span>\r\n                      {discount.minOrderValue > 0 && (\r\n                        <span>\r\n                          Đơn tối thiểu:{\" \"}\r\n                          {discount.minOrderValue.toLocaleString(\"vi-VN\")}₫\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"mt-2\">\r\n                      <span\r\n                        className={`px-2 py-1 rounded text-xs ${\r\n                          discount.active\r\n                            ? \"bg-green-100 text-green-700\"\r\n                            : \"bg-gray-100 text-gray-700\"\r\n                        }`}\r\n                      >\r\n                        {discount.active ? \"Đang hoạt động\" : \"Không hoạt động\"}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => handleEditDiscount(discount)}\r\n                    className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  {/* <button \r\n                    onClick={() => handleDeleteDiscount(discount)}\r\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 text-gray-500\">\r\n            {searchTerm || statusFilter !== \"all\"\r\n              ? \"Không tìm thấy khuyến mãi phù hợp\"\r\n              : \"Chưa có khuyến mãi nào\"}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Confirm Dialog */}\r\n      {/* <ConfirmDialog\r\n        open={confirmDialog.open}\r\n        title=\"Xác nhận xóa khuyến mãi\"\r\n        message={`Bạn có chắc chắn muốn xóa khuyến mãi \"${confirmDialog.discount?.code}\"? Hành động này không thể hoàn tác.`}\r\n        confirmText=\"Xóa khuyến mãi\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setConfirmDialog({ open: false })}\r\n      /> */}\r\n\r\n      {/* Discount Modal */}\r\n      <DiscountModal\r\n        isOpen={discountModal.open}\r\n        onClose={() => setDiscountModal({ open: false })}\r\n        discount={discountModal.discount}\r\n        onSuccess={handleDiscountModalSuccess}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Promotions;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const result = await DiscountApi.getAll();\r\n    return result.content || result;\r\n  } catch (error) {\r\n    console.error(\"Error loading discounts:\", error);\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Inventories.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":13,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":13,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'inventories' logical expression could make the dependencies of useMemo Hook (at line 43) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'inventories' in its own useMemo() Hook.","line":34,"column":9,"nodeType":"VariableDeclarator","endLine":34,"endColumn":55},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'products' logical expression could make the dependencies of useMemo Hook (at line 43) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'products' in its own useMemo() Hook.","line":35,"column":9,"nodeType":"VariableDeclarator","endLine":35,"endColumn":67}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Package, Search, AlertTriangle, CheckCircle, Edit } from 'lucide-react';\r\nimport type { InventorySummary, ProductSummary } from '../../types/types';\r\nimport { InventoryApi, productApi } from '../../utils/api';\r\nimport InventoryModal from '../../components/admin-modal/InventoryModal';\r\nimport { toast } from 'react-toastify';\r\n\r\ninterface InventoriesProps {\r\n  data: InventorySummary[] | null;\r\n  onReload: () => void;\r\n}\r\n\r\nexport const loadData = async () => {\r\n  try {\r\n    const [inventories, productsResponse] = await Promise.all([\r\n      InventoryApi.getAll(),\r\n      productApi.getAll({ page: 0, size: 100 })\r\n    ]);\r\n    const products = productsResponse?.content || [];\r\n    return { inventories, products };\r\n  } catch (error) {\r\n    console.error('Error loading inventories:', error);\r\n    toast.error('Không thể tải dữ liệu tồn kho');\r\n    return { inventories: [], products: [] };\r\n  }\r\n};\r\n\r\nconst Inventories: React.FC<InventoriesProps> = ({ data, onReload }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedInventory, setSelectedInventory] = useState<InventorySummary | null>(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [filterStatus, setFilterStatus] = useState<'all' | 'in-stock' | 'low-stock' | 'out-of-stock'>('all');\r\n\r\n  const inventories = (data as any)?.inventories || [];\r\n  const products: ProductSummary[] = (data as any)?.products || [];\r\n  \r\n  const inventoriesWithProducts = useMemo(() => {\r\n    const productMap = new Map(products.map(p => [p.id, p]));\r\n    return inventories.map((inv: any) => ({\r\n      ...inv,\r\n      product: productMap.get(inv.productId)\r\n    })).filter((inv: any) => inv.product); \r\n  }, [inventories, products]);\r\n\r\n  const filteredInventories = useMemo(() => {\r\n    let filtered = inventoriesWithProducts;\r\n\r\n    if (searchTerm) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((inv: any) => {\r\n        if (!inv.product) return false;\r\n        return (\r\n          inv.product.name.toLowerCase().includes(searchLower) ||\r\n          inv.product.sku.toLowerCase().includes(searchLower) ||\r\n          inv.product.category?.name.toLowerCase().includes(searchLower) ||\r\n          inv.product.brand?.name.toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n    }\r\n\r\n    if (filterStatus !== 'all') {\r\n      filtered = filtered.filter((inv: any) => {\r\n        const available = inv.onHand - inv.reserved;\r\n        if (filterStatus === 'out-of-stock') return available <= 0;\r\n        if (filterStatus === 'low-stock') return available > 0 && available <= 10;\r\n        if (filterStatus === 'in-stock') return available > 10;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [inventoriesWithProducts, searchTerm, filterStatus]);\r\n\r\n  const handleEdit = (inventory: InventorySummary) => {\r\n    setSelectedInventory(inventory);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n    setSelectedInventory(null);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    onReload();\r\n  };\r\n\r\n  // Statistics\r\n  const stats = useMemo(() => {\r\n    const validInventories = inventoriesWithProducts;\r\n    const totalProducts = validInventories.length;\r\n    const inStock = validInventories.filter((inv: any) => inv.onHand - inv.reserved > 10).length;\r\n    const lowStock = validInventories.filter((inv: any) => {\r\n      const available = inv.onHand - inv.reserved;\r\n      return available > 0 && available <= 10;\r\n    }).length;\r\n    const outOfStock = validInventories.filter((inv: any) => inv.onHand - inv.reserved <= 0).length;\r\n    const totalOnHand = validInventories.reduce((sum: number, inv: any) => sum + inv.onHand, 0);\r\n    const totalReserved = validInventories.reduce((sum: number, inv: any) => sum + inv.reserved, 0);\r\n\r\n    return { totalProducts, inStock, lowStock, outOfStock, totalOnHand, totalReserved };\r\n  }, [inventoriesWithProducts]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\r\n            <Package className=\"w-7 h-7 text-purple-600\" />\r\n            Quản Lý Tồn Kho\r\n          </h2>\r\n          <p className=\"text-gray-600 mt-1\">Theo dõi và điều chỉnh số lượng tồn kho</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white shadow-lg\">\r\n          <p className=\"text-blue-100 text-sm font-medium\">Tổng sản phẩm</p>\r\n          <p className=\"text-3xl font-bold mt-1\">{stats.totalProducts}</p>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white shadow-lg\">\r\n          <p className=\"text-green-100 text-sm font-medium\">Còn hàng</p>\r\n          <p className=\"text-3xl font-bold mt-1\">{stats.inStock}</p>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 text-white shadow-lg\">\r\n          <p className=\"text-orange-100 text-sm font-medium\">Sắp hết</p>\r\n          <p className=\"text-3xl font-bold mt-1\">{stats.lowStock}</p>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white shadow-lg\">\r\n          <p className=\"text-red-100 text-sm font-medium\">Hết hàng</p>\r\n          <p className=\"text-3xl font-bold mt-1\">{stats.outOfStock}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Total Stock Summary */}\r\n      <div className=\"bg-gradient-to-r from-purple-50 to-cyan-50 rounded-xl p-6 border border-purple-200\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <div>\r\n            <p className=\"text-sm text-gray-600 font-medium\">Tổng tồn kho</p>\r\n            <p className=\"text-3xl font-bold text-purple-600 mt-1\">{stats.totalOnHand.toLocaleString()}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-600 font-medium\">Đã đặt hàng</p>\r\n            <p className=\"text-3xl font-bold text-orange-600 mt-1\">{stats.totalReserved.toLocaleString()}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-600 font-medium\">Khả dụng</p>\r\n            <p className=\"text-3xl font-bold text-green-600 mt-1\">\r\n              {(stats.totalOnHand - stats.totalReserved).toLocaleString()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search and Filter */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm theo tên, SKU, danh mục, thương hiệu...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setFilterStatus('all')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              filterStatus === 'all'\r\n                ? 'bg-purple-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Tất cả\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterStatus('in-stock')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              filterStatus === 'in-stock'\r\n                ? 'bg-green-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Còn hàng\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterStatus('low-stock')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              filterStatus === 'low-stock'\r\n                ? 'bg-orange-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Sắp hết\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterStatus('out-of-stock')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              filterStatus === 'out-of-stock'\r\n                ? 'bg-red-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Hết hàng\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gradient-to-r from-purple-600 to-cyan-500 text-white\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-sm font-semibold\">Sản phẩm</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-semibold\">Danh mục</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-semibold\">Thương hiệu</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-semibold\">Tồn kho</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-semibold\">Đã đặt</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-semibold\">Khả dụng</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-semibold\">Trạng thái</th>\r\n                <th className=\"px-4 py-3 text-center text-sm font-semibold\">Thao tác</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {filteredInventories.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-4 py-12 text-center text-gray-500\">\r\n                    <Package className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                    <p className=\"font-medium\">Không tìm thấy dữ liệu</p>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredInventories.map((inventory) => {\r\n                  if (!inventory.product) return null;\r\n                  \r\n                  const available = inventory.onHand - inventory.reserved;\r\n                  let statusBadge;\r\n                  if (available <= 0) {\r\n                    statusBadge = (\r\n                      <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium\">\r\n                        <AlertTriangle className=\"w-3 h-3\" />\r\n                        Hết hàng\r\n                      </span>\r\n                    );\r\n                  } else if (available <= 10) {\r\n                    statusBadge = (\r\n                      <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium\">\r\n                        <AlertTriangle className=\"w-3 h-3\" />\r\n                        Sắp hết\r\n                      </span>\r\n                    );\r\n                  } else {\r\n                    statusBadge = (\r\n                      <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium\">\r\n                        <CheckCircle className=\"w-3 h-3\" />\r\n                        Còn hàng\r\n                      </span>\r\n                    );\r\n                  }\r\n\r\n                  return (\r\n                    <tr key={inventory.product.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                      <td className=\"px-4 py-3\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <img\r\n                            src={inventory.product.thumbnailUrl}\r\n                            alt={inventory.product.name}\r\n                            className=\"w-12 h-12 object-cover rounded-lg\"\r\n                          />\r\n                          <div className=\"min-w-0\">\r\n                            <p className=\"font-medium text-gray-900 line-clamp-2\">\r\n                              {inventory.product.name}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500\">{inventory.product.sku}</p>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                        {inventory.product.category.name}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                        {inventory.product.brand?.name || '-'}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <span className=\"font-semibold text-blue-600\">{inventory.onHand}</span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <span className=\"font-semibold text-orange-600\">{inventory.reserved}</span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <span className={`font-semibold ${available > 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                          {available}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center\">{statusBadge}</td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <div className=\"flex items-center justify-center gap-2\">\r\n                          <button\r\n                            onClick={() => handleEdit(inventory)}\r\n                            className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                            title=\"Điều chỉnh tồn kho\"\r\n                          >\r\n                            <Edit className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {showModal && (\r\n        <InventoryModal\r\n          inventory={selectedInventory}\r\n          onClose={handleCloseModal}\r\n          onSave={handleSave}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Inventories;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Orders.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'orders' logical expression could make the dependencies of useEffect Hook (at line 30) change on every render. To fix this, wrap the initialization of 'orders' in its own useMemo() Hook.","line":15,"column":9,"nodeType":"VariableDeclarator","endLine":15,"endColumn":37},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'orders' logical expression could make the dependencies of useMemo Hook (at line 73) change on every render. To fix this, wrap the initialization of 'orders' in its own useMemo() Hook.","line":15,"column":9,"nodeType":"VariableDeclarator","endLine":15,"endColumn":37},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":225,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":225,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from 'react';\r\nimport { Eye, Package, Clock, CheckCircle, XCircle, Search } from 'lucide-react';\r\nimport type { Order } from '../../types/types';\r\nimport { orderApi } from '../../utils/api';\r\nimport OrderDetailsModal from '../../components/admin-modal/OrderDetailsModal';\r\nimport Pagination from '../../components/Pagination';\r\n\r\ntype Props = { \r\n  data?: { content: Order[]; page: { totalPages: number; totalElements: number; number: number; size: number } };\r\n  onReload?: () => void;\r\n  onPageChange?: (page: number, size: number) => void;\r\n};\r\n\r\nconst Orders: React.FC<Props> = ({ data, onReload, onPageChange }) => {\r\n  const orders = data?.content || [];\r\n  const pagination = data?.page || { totalPages: 0, totalElements: 0, number: 0, size: 20 };\r\n  \r\n  const [selectedOrderId, setSelectedOrderId] = useState<string | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('ALL');\r\n  const [selectedStatuses, setSelectedStatuses] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    const initialStatuses: Record<string, string> = {};\r\n    orders.forEach((order: Order) => {\r\n      initialStatuses[order.id] = order.status;\r\n    });\r\n    setSelectedStatuses(initialStatuses);\r\n  }, [orders]);\r\n\r\n  const handleViewDetails = (orderId: string) => {\r\n    setSelectedOrderId(orderId);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedOrderId(null);\r\n  };\r\n\r\n  const handlePageChange = (page: number) => {\r\n    onPageChange?.(page, pagination.size);\r\n  };\r\n\r\n  const handlePageSizeChange = (size: number) => {\r\n    onPageChange?.(0, size);\r\n  };\r\n\r\n  // Filter and sort orders\r\n  const filteredOrders = useMemo(() => {\r\n    let filtered = orders;\r\n\r\n    // Filter by status\r\n    if (statusFilter !== 'ALL') {\r\n      filtered = filtered.filter((order: Order) => order.status === statusFilter);\r\n    }\r\n\r\n    // Filter by search term\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase().trim();\r\n      filtered = filtered.filter((order: Order) => {\r\n        const customerNameMatch = order.user.name.toLowerCase().includes(searchLower);\r\n        const orderIdMatch = order.id.toLowerCase().includes(searchLower);\r\n        return customerNameMatch || orderIdMatch;\r\n      });\r\n    }\r\n\r\n    // Sort by created date (newest first)\r\n    return filtered.sort((a: Order, b: Order) => \r\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n    );\r\n  }, [orders, searchTerm, statusFilter]);\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig: any = {\r\n      PENDING: { bg: 'bg-yellow-100', text: 'text-yellow-800', icon: Clock, label: 'Chờ xử lý' },\r\n      CONFIRMED: { bg: 'bg-green-100', text: 'text-green-800', icon: CheckCircle, label: 'Đã xác nhận' },\r\n      WAITING_FOR_DELIVERY: { bg: 'bg-blue-100', text: 'text-blue-800', icon: Package, label: 'Chờ giao hàng' },\r\n      IN_TRANSIT: { bg: 'bg-purple-100', text: 'text-purple-800', icon: Package, label: 'Đang giao' },\r\n      DELIVERED: { bg: 'bg-green-100', text: 'text-green-800', icon: CheckCircle, label: 'Đã giao' },\r\n      CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', icon: XCircle, label: 'Đã hủy' },\r\n    };\r\n    const config = statusConfig[status] || statusConfig.PENDING;\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\r\n        <Icon className=\"w-3 h-3\" />\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý đơn hàng</h2>\r\n        <div className=\"flex gap-2\">\r\n          {/* Search Input */}\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Tìm theo tên khách hàng, mã đơn...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent w-80\"\r\n            />\r\n          </div>\r\n          <select \r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"ALL\">Tất cả trạng thái</option>\r\n            <option value=\"PENDING\">Chờ xử lý</option>\r\n            <option value=\"CONFIRMED\">Đã xác nhận</option>\r\n            <option value=\"WAITING_FOR_DELIVERY\">Chờ giao hàng</option>\r\n            <option value=\"IN_TRANSIT\">Đang giao</option>\r\n            <option value=\"DELIVERED\">Đã giao</option>\r\n            <option value=\"CANCELLED\">Đã hủy</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white border border-gray-200 rounded-xl overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Mã đơn</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Khách hàng</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Tổng tiền</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Trạng thái</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Ngày đặt</th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">Thao tác</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {filteredOrders.length > 0 ? (\r\n              filteredOrders.map((order: Order) => (\r\n                <tr key={order.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                  <td className=\"px-6 py-4 text-sm font-medium text-gray-900\">#{order.id.slice(-8)}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-900\">{order.user.name}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-900 font-semibold\">{order.grandTotal.toLocaleString()} ₫</td>\r\n                  <td className=\"px-6 py-4 text-sm\">{getStatusBadge(order.status)}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-600\">{new Date(order.createdAt).toLocaleDateString('vi-VN')}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-right\">\r\n                    <div className=\"flex flex-col gap-2 items-end\">\r\n                      <button \r\n                        onClick={() => handleViewDetails(order.id)}\r\n                        className=\"inline-flex items-center gap-1 px-3 py-1 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                      >\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        <span>Chi tiết</span>\r\n                      </button>\r\n                      <div className=\"flex gap-2 items-center\">\r\n                        <select\r\n                          value={selectedStatuses[order.id] || order.status}\r\n                          onChange={(e) => setSelectedStatuses(prev => ({ ...prev, [order.id]: e.target.value }))}\r\n                          className=\"px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-purple-500 focus:border-transparent\"\r\n                        >\r\n                          <option value=\"PENDING\">Chờ xử lý</option>\r\n                          <option value=\"CONFIRMED\">Đã xác nhận</option>\r\n                          <option value=\"WAITING_FOR_DELIVERY\">Chờ giao hàng</option>\r\n                          <option value=\"IN_TRANSIT\">Đang giao</option>\r\n                          <option value=\"DELIVERED\">Đã giao</option>\r\n                          <option value=\"CANCELLED\">Đã hủy</option>\r\n                        </select>\r\n                        <button\r\n                          onClick={async () => {\r\n                            const newStatus = selectedStatuses[order.id] || order.status;\r\n                            if (newStatus === order.status) return; // No change\r\n                            try {\r\n                              await orderApi.updateOrderStatus(order.id, newStatus);\r\n                              onReload?.();\r\n                            } catch (error) {\r\n                              console.error('Failed to update order status:', error);\r\n                            }\r\n                          }}\r\n                          className=\"px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors\"\r\n                        >\r\n                          Cập nhật\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  {searchTerm ? 'Không tìm thấy đơn hàng phù hợp' : 'Chưa có đơn hàng nào'}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      <Pagination\r\n        page={pagination.number}\r\n        totalPages={pagination.totalPages}\r\n        totalElements={pagination.totalElements}\r\n        pageSize={pagination.size}\r\n        onPageChange={handlePageChange}\r\n        onPageSizeChange={handlePageSizeChange}\r\n      />\r\n\r\n      {/* Order Details Modal */}\r\n      {selectedOrderId && (\r\n        <OrderDetailsModal\r\n          orderId={selectedOrderId}\r\n          isOpen={isModalOpen}\r\n          onClose={handleCloseModal}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n\r\nexport async function loadData(page: number = 0, size: number = 20) {\r\n  try {\r\n    const response = await orderApi.getAll({ page, size, sort: 'createdAt,DESC' });\r\n    return response;\r\n  } catch (error) {\r\n    console.error('Failed to load orders:', error);\r\n    return { content: [], page: { totalPages: 0, totalElements: 0, number: 0, size: 20 } };\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\POS.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Products.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":10,"column":14,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":10,"endColumn":16,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[481,483],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[481,483],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadProducts'. Either include it or remove the dependency array.","line":57,"column":6,"nodeType":"ArrayExpression","endLine":57,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [loadProducts, page, pageSize]","fix":{"range":[2114,2130],"text":"[loadProducts, page, pageSize]"}}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":314,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":314,"endColumn":31}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from 'react';\r\nimport { Plus, Search, Edit, Trash2, RefreshCw } from 'lucide-react';\r\nimport type { ProductSummary } from '../../types/types';\r\nimport { productApi } from '../../utils/api';\r\nimport ProductModal from '../../components/admin-modal/ProductModal';\r\nimport { toast } from 'react-toastify';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\nimport Pagination from '../../components/Pagination';\r\n\r\ntype Props = {};\r\n\r\nconst Products: React.FC<Props> = () => {\r\n  const [products, setProducts] = useState<ProductSummary[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  // Pagination states\r\n  const [page, setPage] = useState(0);\r\n  const [pageSize, setPageSize] = useState(12);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [totalElements, setTotalElements] = useState(0);\r\n  \r\n  const [selectedProduct, setSelectedProduct] = useState<ProductSummary | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [deleteConfirm, setDeleteConfirm] = useState<{ isOpen: boolean; productId: string | null }>({\r\n    isOpen: false,\r\n    productId: null,\r\n  });\r\n\r\n  // Load products with pagination\r\n  const loadProducts = async (currentPage = page, currentPageSize = pageSize, search = searchTerm) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await productApi.getAll({ \r\n        page: currentPage, \r\n        size: currentPageSize,\r\n        keyword: search.trim() || undefined\r\n      });\r\n      \r\n      setProducts(response.content || []);\r\n      setTotalPages(response.page.totalPages || 0);\r\n      setTotalElements(response.page.totalElements || 0);\r\n    } catch (error) {\r\n      console.error('Failed to load products:', error);\r\n      toast.error('Không thể tải danh sách sản phẩm');\r\n      setProducts([]);\r\n      setTotalPages(0);\r\n      setTotalElements(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load products on mount and when pagination changes\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, [page, pageSize]);\r\n\r\n  // Reload function for after add/edit/delete\r\n  const handleReload = () => {\r\n    loadProducts();\r\n  };\r\n\r\n  const handleAddProduct = () => {\r\n    setSelectedProduct(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditProduct = async (productId: string) => {\r\n    try {\r\n      const productDetail = await productApi.getById(productId);\r\n      setSelectedProduct(productDetail as any);\r\n      setIsModalOpen(true);\r\n    } catch (error) {\r\n      console.error('Error loading product:', error);\r\n      toast.error('Không thể tải thông tin sản phẩm');\r\n    }\r\n  };\r\n\r\n  const handleDeleteProduct = (productId: string) => {\r\n    setDeleteConfirm({ isOpen: true, productId });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!deleteConfirm.productId) return;\r\n\r\n    try {\r\n      await productApi.delete(deleteConfirm.productId);\r\n      toast.success('Xóa sản phẩm thành công!');\r\n      handleReload();\r\n    } catch (error) {\r\n      console.error('Error deleting product:', error);\r\n      toast.error('Không thể xóa sản phẩm');\r\n    } finally {\r\n      setDeleteConfirm({ isOpen: false, productId: null });\r\n    }\r\n  };\r\n\r\n  const handleModalSuccess = () => {\r\n    handleReload();\r\n  };\r\n\r\n  // Handle page change\r\n  const handlePageChange = (newPage: number) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  // Handle page size change\r\n  const handlePageSizeChange = (newPageSize: number) => {\r\n    setPageSize(newPageSize);\r\n    setPage(0); // Reset to first page when changing page size\r\n  };\r\n\r\n  // Handle search\r\n  const handleSearch = (term: string) => {\r\n    setSearchTerm(term);\r\n    setPage(0); // Reset to first page when searching\r\n    loadProducts(0, pageSize, term);\r\n  };\r\n\r\n  const filteredProducts = useMemo(() => {\r\n    // Since search is now server-side, just return products\r\n    return products;\r\n  }, [products]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý sản phẩm</h2>\r\n        <button \r\n          onClick={handleAddProduct}\r\n          className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-cyan-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-shadow\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          <span>Thêm sản phẩm</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo tên, SKU, danh mục, thương hiệu...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') {\r\n                handleSearch(searchTerm);\r\n              }\r\n            }}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n          <button\r\n            onClick={() => handleSearch(searchTerm)}\r\n            className=\"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700\"\r\n          >\r\n            Tìm\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Products Table */}\r\n      <div className=\"bg-white border border-gray-200 rounded-xl overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Sản phẩm</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Danh mục</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Thương hiệu</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Giá niêm yết</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Giá bán</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Tồn kho</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Đánh giá</th>\r\n                <th className=\"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">Thao tác</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-500\">\r\n                    <RefreshCw className=\"w-6 h-6 animate-spin mx-auto mb-2\" />\r\n                    <p>Đang tải danh sách sản phẩm...</p>\r\n                  </td>\r\n                </tr>\r\n              ) : filteredProducts.length > 0 ? (\r\n                filteredProducts.map((product: ProductSummary) => (\r\n                  <tr key={product.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                    <td className=\"px-4 py-4\">\r\n                      <div className=\"flex items-center gap-2 max-w-[280px]\">\r\n                        <img \r\n                          src={product.thumbnailUrl} \r\n                          alt={product.name} \r\n                          className=\"w-12 h-12 object-cover rounded-lg border border-gray-200 flex-shrink-0\" \r\n                        />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"text-sm font-medium text-gray-900 line-clamp-2\">{product.name}</div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm text-gray-600 whitespace-nowrap\">\r\n                      <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                        {product.category?.name || 'N/A'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm text-gray-600 whitespace-nowrap\">\r\n                      {product.brand ? (\r\n                        <span className=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\r\n                          {product.brand.name}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-gray-400 text-xs\">Chưa có</span>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm text-gray-500 whitespace-nowrap\">\r\n                      {product.listedPrice > 0 ? (\r\n                        <div>\r\n                          <div className=\"line-through text-xs\">{product.listedPrice.toLocaleString()} ₫</div>\r\n                          {product.listedPrice > product.price && (\r\n                            <div className=\"text-xs text-red-600 font-medium\">\r\n                              -{Math.round((1 - product.price / product.listedPrice) * 100)}%\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <span className=\"text-gray-400\">-</span>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm font-semibold text-gray-900 whitespace-nowrap\">\r\n                      {product.price.toLocaleString()} ₫\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm whitespace-nowrap\">\r\n                      <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${\r\n                        product.inStock ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                      }`}>\r\n                        {product.inStock ? `${product.availableStock || 0} sp` : 'Hết hàng'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm text-gray-600 whitespace-nowrap\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <span className=\"text-yellow-500\">★</span>\r\n                        <span className=\"font-medium\">{product.rating.toFixed(1)}</span>\r\n                        <span className=\"text-gray-400 text-xs\">({product.reviewCount})</span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 text-sm text-right whitespace-nowrap\">\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <button \r\n                          onClick={() => handleEditProduct(product.id)}\r\n                          className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                          title=\"Chỉnh sửa\"\r\n                        >\r\n                          <Edit className=\"w-4 h-4\" />\r\n                        </button>\r\n                        <button \r\n                          onClick={() => handleDeleteProduct(product.id)}\r\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                          title=\"Xóa\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-500\">\r\n                    {searchTerm ? 'Không tìm thấy sản phẩm phù hợp' : 'Chưa có sản phẩm nào'}\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Product Modal */}\r\n      <ProductModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        product={selectedProduct as any}\r\n        onSuccess={handleModalSuccess}\r\n      />\r\n\r\n      {/* Delete Confirmation */}\r\n      <ConfirmDialog\r\n        open={deleteConfirm.isOpen}\r\n        title=\"Xác nhận xóa sản phẩm\"\r\n        message=\"Bạn có chắc chắn muốn xóa sản phẩm này? Hành động này không thể hoàn tác.\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setDeleteConfirm({ isOpen: false, productId: null })}\r\n        confirmText=\"Xóa\"\r\n        cancelText=\"Hủy\"\r\n      />\r\n\r\n      {/* Pagination */}\r\n      <Pagination\r\n        page={page}\r\n        totalPages={totalPages}\r\n        totalElements={totalElements}\r\n        pageSize={pageSize}\r\n        onPageChange={handlePageChange}\r\n        onPageSizeChange={handlePageSizeChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const response = await productApi.getAll({ page: 0, size: 100 });\r\n    return response.content || [];\r\n  } catch (error) {\r\n    console.error('Failed to load products:', error);\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Reviews.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'reviews' logical expression could make the dependencies of useMemo Hook (at line 46) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'reviews' in its own useMemo() Hook.","line":14,"column":9,"nodeType":"VariableDeclarator","endLine":14,"endColumn":38},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":248,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":248,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Eye, CheckCircle, XCircle, Trash2, Star, Search } from 'lucide-react';\r\nimport { ReviewApi } from '../../utils/api';\r\nimport type { Review } from '../../types/types';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\nimport ReviewDetailsModal from '../../components/admin-modal/ReviewDetailsModal';\r\n\r\ntype Props = { \r\n  data?: { content: Review[]; page: { totalPages: number; totalElements: number; number: number; size: number } };\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Reviews: React.FC<Props> = ({ data, onReload }) => {\r\n  const reviews = data?.content || [];\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('ALL');\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [selectedReviewToDelete, setSelectedReviewToDelete] = useState<Review | null>(null);\r\n  const [selectedReview, setSelectedReview] = useState<Review | null>(null);\r\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\r\n\r\n  // Filter reviews\r\n  const filteredReviews = useMemo(() => {\r\n    let filtered = reviews;\r\n\r\n    // Filter by status\r\n    if (statusFilter !== 'ALL') {\r\n      filtered = filtered.filter((review: any) => review.status === statusFilter);\r\n    }\r\n\r\n    // Filter by search term\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase().trim();\r\n      filtered = filtered.filter((review: Review) => {\r\n        const productIdMatch = review.productId.toLowerCase().includes(searchLower);\r\n        const userNameMatch = review.userName.toLowerCase().includes(searchLower);\r\n        const commentMatch = review.comment.toLowerCase().includes(searchLower);\r\n        return productIdMatch || userNameMatch || commentMatch;\r\n      });\r\n    }\r\n\r\n    // Sort by created date (newest first)\r\n    return filtered.sort((a: Review, b: Review) => \r\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n    );\r\n  }, [reviews, searchTerm, statusFilter]);\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig: any = {\r\n      PENDING: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Chờ duyệt' },\r\n      APPROVED: { bg: 'bg-green-100', text: 'text-green-800', label: 'Đã duyệt' },\r\n      REJECTED: { bg: 'bg-red-100', text: 'text-red-800', label: 'Từ chối' },\r\n    };\r\n    const config = statusConfig[status] || statusConfig.PENDING;\r\n    \r\n    return (\r\n      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderStars = (rating: number) => {\r\n    return (\r\n      <div className=\"flex items-center gap-1\">\r\n        {[1, 2, 3, 4, 5].map((star) => (\r\n          <Star\r\n            key={star}\r\n            className={`w-4 h-4 ${\r\n              star <= rating ? 'text-yellow-400 fill-current' : 'text-gray-300'\r\n            }`}\r\n          />\r\n        ))}\r\n        <span className=\"ml-2 text-sm text-gray-600\">({rating})</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý đánh giá</h2>\r\n        <div className=\"flex gap-2\">\r\n          {/* Search Input */}\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Tìm theo ID sản phẩm, tên người dùng...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent w-80\"\r\n            />\r\n          </div>\r\n          <select \r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"ALL\">Tất cả trạng thái</option>\r\n            <option value=\"PENDING\">Chờ duyệt</option>\r\n            <option value=\"APPROVED\">Đã duyệt</option>\r\n            <option value=\"REJECTED\">Từ chối</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white border border-gray-200 rounded-xl overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">ID</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">ID Sản phẩm</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Người dùng</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Đánh giá</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Nội dung</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Trạng thái</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Ngày tạo</th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">Thao tác</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {filteredReviews.length > 0 ? (\r\n              filteredReviews.map((review: Review) => (\r\n                <tr key={review.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                  <td className=\"px-6 py-4 text-sm font-medium text-gray-900\">#{review.id}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-900\">{review.productId}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-900\">{review.userName}</td>\r\n                  <td className=\"px-6 py-4 text-sm\">{renderStars(review.rating)}</td>\r\n                  <td className=\"px-6 py-4 text-sm\">\r\n                    <div className=\"max-w-xs truncate\" title={review.comment}>\r\n                      {review.comment}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm\">{getStatusBadge(review.status)}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-600\">\r\n                    {new Date(review.createdAt).toLocaleDateString('vi-VN')}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-right\">\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <button \r\n                        onClick={() => {\r\n                          setSelectedReview(review);\r\n                          setIsDetailsModalOpen(true);\r\n                        }}\r\n                        className=\"inline-flex items-center gap-1 px-3 py-1 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                      >\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        <span>Chi tiết</span>\r\n                      </button>\r\n                      {review.status === 'PENDING' && (\r\n                        <>\r\n                          <button \r\n                            className=\"inline-flex items-center gap-1 px-3 py-1 text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n                            onClick={async () => {\r\n                              try {\r\n                                await ReviewApi.approveReview(review.id);\r\n                                onReload?.();\r\n                              } catch (error) {\r\n                                console.error('Failed to approve review:', error);\r\n                              }\r\n                            }}\r\n                          >\r\n                            <CheckCircle className=\"w-4 h-4\" />\r\n                            <span>Duyệt</span>\r\n                          </button>\r\n                          <button \r\n                            className=\"inline-flex items-center gap-1 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                            onClick={async () => {\r\n                              try {\r\n                                await ReviewApi.rejectReview(review.id);\r\n                                onReload?.();\r\n                              } catch (error) {\r\n                                console.error('Failed to reject review:', error);\r\n                              }\r\n                            }}\r\n                          >\r\n                            <XCircle className=\"w-4 h-4\" />\r\n                            <span>Từ chối</span>\r\n                          </button>\r\n                        </>\r\n                      )}\r\n                      <button \r\n                        className=\"inline-flex items-center gap-1 px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                        onClick={() => {\r\n                          setSelectedReviewToDelete(review);\r\n                          setIsDeleteDialogOpen(true);\r\n                        }}\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                        <span>Xóa</span>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={8} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  {searchTerm ? 'Không tìm thấy đánh giá phù hợp' : 'Chưa có đánh giá nào'}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <ConfirmDialog\r\n        open={isDeleteDialogOpen}\r\n        title=\"Xác nhận xóa đánh giá\"\r\n        message={`Bạn có chắc muốn xóa đánh giá của ${selectedReviewToDelete?.userName} cho sản phẩm ${selectedReviewToDelete?.productId}?`}\r\n        confirmText=\"Xóa\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={async () => {\r\n          if (selectedReviewToDelete) {\r\n            try {\r\n              await ReviewApi.deleteReview(selectedReviewToDelete.id);\r\n              onReload?.();\r\n            } catch (error) {\r\n              console.error('Failed to delete review:', error);\r\n            }\r\n          }\r\n          setIsDeleteDialogOpen(false);\r\n          setSelectedReviewToDelete(null);\r\n        }}\r\n        onCancel={() => {\r\n          setIsDeleteDialogOpen(false);\r\n          setSelectedReviewToDelete(null);\r\n        }}\r\n      />\r\n\r\n      {/* Review Details Modal */}\r\n      <ReviewDetailsModal\r\n        review={selectedReview}\r\n        isOpen={isDetailsModalOpen}\r\n        onClose={() => {\r\n          setIsDetailsModalOpen(false);\r\n          setSelectedReview(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reviews;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const response = await ReviewApi.getAll({ page: 0, size: 50 });\r\n    return response;\r\n  } catch (error) {\r\n    console.error('Failed to load reviews:', error);\r\n    return { content: [], page: { totalPages: 0, totalElements: 0, number: 0, size: 50 } };\r\n  }\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Tickets.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'loadTickets'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, loadTickets]","fix":{"range":[3089,3100],"text":"[activeTab, loadTickets]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { MessageSquare, Clock, CheckCircle, AlertCircle, Shield, Search } from 'lucide-react';\r\nimport { SupportTicketApi, WarrantyRequestApi, userApi } from '../../utils/api';\r\nimport type { SupportTicket, WarrantyRequest } from '../../types/types';\r\nimport TicketModal from '../../components/admin-modal/TicketModal';\r\nimport WarrantyRequestModal from '../../components/admin-modal/WarrantyRequestModal';\r\n\r\nconst Tickets: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<'tickets' | 'warranty'>('tickets');\r\n  const [tickets, setTickets] = useState<SupportTicket[]>([]);\r\n  const [warrantyRequests, setWarrantyRequests] = useState<WarrantyRequest[]>([]);\r\n  const [userNames, setUserNames] = useState<Record<string, string>>({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedTicket, setSelectedTicket] = useState<SupportTicket | null>(null);\r\n  const [selectedWarrantyRequest, setSelectedWarrantyRequest] = useState<WarrantyRequest | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [ticketStatusFilter, setTicketStatusFilter] = useState<'all' | 'OPEN' | 'IN_PROGRESS' | 'RESOLVED' | 'CLOSED'>('all');\r\n  const [warrantyStatusFilter, setWarrantyStatusFilter] = useState<'all' | 'SUBMITTED' | 'ACCEPTED' | 'REJECTED' | 'REPAIRED' | 'REPLACED' | 'RETURNED'>('all');\r\n\r\n  const filteredTickets = useMemo(() => {\r\n    let filtered = tickets;\r\n\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((ticket: SupportTicket) => \r\n        ticket.title.toLowerCase().includes(searchLower) ||\r\n        ticket.subject.toLowerCase().includes(searchLower) ||\r\n        ticket.content.toLowerCase().includes(searchLower) ||\r\n        userNames[ticket.userId]?.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    if (ticketStatusFilter !== 'all') {\r\n      filtered = filtered.filter((ticket: SupportTicket) => ticket.status === ticketStatusFilter);\r\n    }\r\n\r\n    return filtered;\r\n  }, [tickets, searchTerm, ticketStatusFilter, userNames]);\r\n\r\n  const filteredWarrantyRequests = useMemo(() => {\r\n    let filtered = warrantyRequests;\r\n\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((request: WarrantyRequest) => \r\n        request.product?.name.toLowerCase().includes(searchLower) ||\r\n        request.product?.sku.toLowerCase().includes(searchLower) ||\r\n        request.issueType.toLowerCase().includes(searchLower) ||\r\n        request.description.toLowerCase().includes(searchLower)\r\n      );\r\n    }\r\n\r\n    if (warrantyStatusFilter !== 'all') {\r\n      filtered = filtered.filter((request: WarrantyRequest) => request.status === warrantyStatusFilter);\r\n    }\r\n\r\n    return filtered;\r\n  }, [warrantyRequests, searchTerm, warrantyStatusFilter]);\r\n\r\n  React.useEffect(() => {\r\n    if (activeTab === 'tickets') {\r\n      loadTickets();\r\n    } else {\r\n      loadWarrantyRequests();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  // Hàm tìm tên người dùng theo userId\r\n  const fetchUserNames = async (userIds: string[]) => {\r\n    const names: Record<string, string> = {};\r\n    const uniqueIds = [...new Set(userIds)];\r\n\r\n    for (const userId of uniqueIds) {\r\n      if (!userNames[userId]) {\r\n        try {\r\n          const user = await userApi.getUserById(userId);\r\n          names[userId] = user.name;\r\n        } catch (error) {\r\n          console.error(`Error fetching user ${userId}:`, error);\r\n          names[userId] = 'N/A';\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Object.keys(names).length > 0) {\r\n      setUserNames(prev => ({ ...prev, ...names }));\r\n    }\r\n  };\r\n\r\n\r\n  const loadTickets = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await SupportTicketApi.getAllTickets();\r\n      const ticketData = response.content || response;\r\n      setTickets(ticketData);\r\n\r\n      // Fetch user names for tickets\r\n      const userIds = ticketData.map((ticket: SupportTicket) => ticket.userId).filter(Boolean);\r\n      if (userIds.length > 0) {\r\n        await fetchUserNames(userIds);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading tickets:', error);\r\n      setTickets([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadWarrantyRequests = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await WarrantyRequestApi.getAllWarrantyRequests();\r\n      const warrantyData = response.content || response;\r\n      setWarrantyRequests(warrantyData);\r\n    \r\n    } catch (error) {\r\n      console.error('Error loading warranty requests:', error);\r\n      setWarrantyRequests([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getTicketStatusBadge = (status: string) => {\r\n    const config: any = {\r\n      OPEN: { bg: 'bg-blue-100', text: 'text-blue-700', icon: Clock, label: 'Mới' },\r\n      IN_PROGRESS: { bg: 'bg-purple-100', text: 'text-purple-700', icon: AlertCircle, label: 'Đang xử lý' },\r\n      RESOLVED: { bg: 'bg-green-100', text: 'text-green-700', icon: CheckCircle, label: 'Đã giải quyết' },\r\n      CLOSED: { bg: 'bg-gray-100', text: 'text-gray-700', icon: CheckCircle, label: 'Đã đóng' },\r\n    };\r\n    const c = config[status] || config.OPEN;\r\n    const Icon = c.icon;\r\n    return (\r\n      <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${c.bg} ${c.text}`}>\r\n        <Icon className=\"w-3 h-3\" />\r\n        {c.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getWarrantyStatusBadge = (status: string) => {\r\n    const config: any = {\r\n      SUBMITTED: { bg: 'bg-blue-100', text: 'text-blue-700', icon: Clock, label: 'Đã gửi' },\r\n      ACCEPTED: { bg: 'bg-yellow-100', text: 'text-yellow-700', icon: AlertCircle, label: 'Đã chấp nhận' },\r\n      REJECTED: { bg: 'bg-red-100', text: 'text-red-700', icon: AlertCircle, label: 'Từ chối' },\r\n      REPAIRED: { bg: 'bg-green-100', text: 'text-green-700', icon: CheckCircle, label: 'Đã sửa chữa' },\r\n      REPLACED: { bg: 'bg-green-100', text: 'text-green-700', icon: CheckCircle, label: 'Đã thay thế' },\r\n      RETURNED: { bg: 'bg-gray-100', text: 'text-gray-700', icon: CheckCircle, label: 'Đã trả lại' },\r\n    };\r\n    const c = config[status] || config.SUBMITTED;\r\n    const Icon = c.icon;\r\n    return (\r\n      <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${c.bg} ${c.text}`}>\r\n        <Icon className=\"w-3 h-3\" />\r\n        {c.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('vi-VN');\r\n  };\r\n\r\n  const handleViewTicket = (ticket: SupportTicket) => {\r\n    setSelectedTicket(ticket);\r\n    setSelectedWarrantyRequest(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleViewWarrantyRequest = (request: WarrantyRequest) => {\r\n    setSelectedWarrantyRequest(request);\r\n    setSelectedTicket(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedTicket(null);\r\n    setSelectedWarrantyRequest(null);\r\n  };\r\n\r\n  const handleModalSuccess = () => {\r\n    if (activeTab === 'tickets') {\r\n      loadTickets();\r\n    } else {\r\n      loadWarrantyRequests();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý hỗ trợ</h2>\r\n      </div>\r\n\r\n      {/* Search and Filter Bar */}\r\n      <div className=\"mb-6 flex gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder={activeTab === 'tickets' ? 'Tìm kiếm ticket theo tiêu đề, nội dung, khách hàng...' : 'Tìm kiếm yêu cầu bảo hành theo sản phẩm, vấn đề...'}\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n        {activeTab === 'tickets' ? (\r\n          <select\r\n            value={ticketStatusFilter}\r\n            onChange={(e) => setTicketStatusFilter(e.target.value as any)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"all\">Tất cả trạng thái</option>\r\n            <option value=\"OPEN\">Mới</option>\r\n            <option value=\"IN_PROGRESS\">Đang xử lý</option>\r\n            <option value=\"RESOLVED\">Đã giải quyết</option>\r\n            <option value=\"CLOSED\">Đã đóng</option>\r\n          </select>\r\n        ) : (\r\n          <select\r\n            value={warrantyStatusFilter}\r\n            onChange={(e) => setWarrantyStatusFilter(e.target.value as any)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"all\">Tất cả trạng thái</option>\r\n            <option value=\"SUBMITTED\">Đã gửi</option>\r\n            <option value=\"ACCEPTED\">Đã chấp nhận</option>\r\n            <option value=\"REJECTED\">Từ chối</option>\r\n            <option value=\"REPAIRED\">Đã sửa chữa</option>\r\n            <option value=\"REPLACED\">Đã thay thế</option>\r\n            <option value=\"RETURNED\">Đã trả lại</option>\r\n          </select>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex gap-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit\">\r\n        <button\r\n          onClick={() => setActiveTab('tickets')}\r\n          className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n            activeTab === 'tickets'\r\n              ? 'bg-white text-purple-600 shadow-sm'\r\n              : 'text-gray-600 hover:text-gray-800'\r\n          }`}\r\n        >\r\n          <MessageSquare className=\"w-4 h-4 inline mr-2\" />\r\n          Ticket hỗ trợ\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('warranty')}\r\n          className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\r\n            activeTab === 'warranty'\r\n              ? 'bg-white text-purple-600 shadow-sm'\r\n              : 'text-gray-600 hover:text-gray-800'\r\n          }`}\r\n        >\r\n          <Shield className=\"w-4 h-4 inline mr-2\" />\r\n          Yêu cầu bảo hành\r\n        </button>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      {activeTab === 'tickets' ? (\r\n        <div className=\"space-y-4\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-gray-500\">Đang tải...</div>\r\n          ) : filteredTickets.length > 0 ? (\r\n            filteredTickets.map((ticket: SupportTicket) => (\r\n              <div key={ticket.id} className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex gap-4 flex-1\">\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-cyan-500 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                      <MessageSquare className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-3 mb-2\">\r\n                        <h3 className=\"text-lg font-semibold text-zinc-800\">{ticket.title} - {ticket.subject}</h3>\r\n                        {getTicketStatusBadge(ticket.status)}\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-600 mb-3\">{ticket.content}</p>\r\n                      <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                        <span>Khách hàng: {userNames[ticket.userId] || 'N/A'}</span>\r\n                        <span>•</span>\r\n                        <span>{formatDate(ticket.createdAt)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <button \r\n                    onClick={() => handleViewTicket(ticket)}\r\n                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\"\r\n                  >\r\n                    Xem chi tiết\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              {searchTerm || ticketStatusFilter !== 'all' ? 'Không tìm thấy ticket phù hợp' : 'Chưa có ticket hỗ trợ nào'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12 text-gray-500\">Đang tải...</div>\r\n          ) : filteredWarrantyRequests.length > 0 ? (\r\n            filteredWarrantyRequests.map((request: WarrantyRequest) => (\r\n              <div key={request.id} className=\"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-shadow\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex gap-4 flex-1\">\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                      <Shield className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-3 mb-2\">\r\n                        <h3 className=\"text-lg font-semibold text-zinc-800\">#{request.id} - {request.product?.name || 'N/A'}</h3>\r\n                        {getWarrantyStatusBadge(request.status)}\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-600 mb-2\">\r\n                        <strong>Vấn đề:</strong> {request.issueType}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-600 mb-3\">{request.description}</p>\r\n                      <div className=\"flex items-center gap-4 text-xs text-gray-500\">x\r\n                        <span>Sản phẩm: {request.product?.sku || 'N/A'}</span>\r\n                        <span>•</span>\r\n                        <span>Số lượng: {request.quantity}</span>\r\n                        <span>•</span>\r\n                        <span>{formatDate(request.requestedAt)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <button \r\n                    onClick={() => handleViewWarrantyRequest(request)}\r\n                    className=\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm\"\r\n                  >\r\n                    Xem chi tiết\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              {searchTerm || warrantyStatusFilter !== 'all' ? 'Không tìm thấy yêu cầu bảo hành phù hợp' : 'Chưa có yêu cầu bảo hành nào'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modals */}\r\n      <TicketModal\r\n        isOpen={isModalOpen && !!selectedTicket}\r\n        onClose={handleCloseModal}\r\n        ticket={selectedTicket || undefined}\r\n        onSuccess={handleModalSuccess}\r\n      />\r\n      <WarrantyRequestModal\r\n        isOpen={isModalOpen && !!selectedWarrantyRequest}\r\n        onClose={handleCloseModal}\r\n        warrantyRequest={selectedWarrantyRequest || undefined}\r\n        onSuccess={handleModalSuccess}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tickets;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\pages\\admin\\Users.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'users' logical expression could make the dependencies of useMemo Hook (at line 62) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'users' in its own useMemo() Hook.","line":14,"column":9,"nodeType":"VariableDeclarator","endLine":14,"endColumn":27},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":346,"column":23,"nodeType":"Identifier","messageId":"namedExport","endLine":346,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Search, Trash2, Shield, User as UserIcon, Power, PowerOff } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport { userApi } from '../../utils/api';\r\nimport type { UserSummary } from '../../types/types';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\n\r\ntype Props = { \r\n  data?: UserSummary[];\r\n  onReload?: () => void;\r\n};\r\n\r\nconst Users: React.FC<Props> = ({ data, onReload }) => {\r\n  const users = data || [];\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState<'all' | 'Admin' | 'User'>('all');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'enabled' | 'disabled'>('all');\r\n  const [confirmDialog, setConfirmDialog] = useState<{\r\n    open: boolean;\r\n    user?: UserSummary;\r\n  }>({ open: false });\r\n  const [userDetailModal, setUserDetailModal] = useState<{\r\n    open: boolean;\r\n    user?: UserSummary;\r\n    loading: boolean;\r\n  }>({ open: false, loading: false });\r\n\r\n  const filteredUsers = useMemo(() => {\r\n    let filtered = users;\r\n\r\n    // Tìm kiếm theo tên, email, phone\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter((user: UserSummary) => \r\n        user.name.toLowerCase().includes(searchLower) ||\r\n        user.email.toLowerCase().includes(searchLower) ||\r\n        (user.phone && user.phone.toLowerCase().includes(searchLower))\r\n      );\r\n    }\r\n\r\n    // Lọc theo vai trò - hỗ trợ nhiều format: Admin/ADMIN/ROLE_ADMIN\r\n    if (roleFilter !== 'all') {\r\n      filtered = filtered.filter((user: UserSummary) => {\r\n        const userRole = user.role?.toUpperCase() || '';\r\n        const filterRole = roleFilter.toUpperCase();\r\n        return userRole === filterRole || \r\n               userRole === `ROLE_${filterRole}` || \r\n               userRole.includes(filterRole);\r\n      });\r\n    }\r\n\r\n    // Lọc theo trạng thái\r\n    if (statusFilter !== 'all') {\r\n      filtered = filtered.filter((user: UserSummary) => {\r\n        if (statusFilter === 'enabled') return user.enabled;\r\n        if (statusFilter === 'disabled') return !user.enabled;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [users, searchTerm, roleFilter, statusFilter]);\r\n\r\n  const handleToggleUserStatus = async (user: UserSummary) => {\r\n    try {\r\n      if (user.enabled) {\r\n        await userApi.disableUser(user.id);\r\n        toast.success(`Đã khóa tài khoản của ${user.name}`);\r\n      } else {\r\n        await userApi.enableUser(user.id);\r\n        toast.success(`Đã kích hoạt tài khoản của ${user.name}`);\r\n      }\r\n      onReload?.();\r\n    } catch {\r\n      toast.error('Có lỗi xảy ra khi thay đổi trạng thái tài khoản');\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = (user: UserSummary) => {\r\n    setConfirmDialog({ open: true, user });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!confirmDialog.user) return;\r\n\r\n    try {\r\n      await userApi.deleteUser(confirmDialog.user.id);\r\n      toast.success(`Đã khóa tài khoản của ${confirmDialog.user.name}`);\r\n      setConfirmDialog({ open: false });\r\n      onReload?.();\r\n    } catch {\r\n      toast.error('Có lỗi xảy ra khi xóa tài khoản');\r\n    }\r\n  };\r\n\r\n  const handleViewUserDetail = async (user: UserSummary) => {\r\n    setUserDetailModal({ open: true, user, loading: true });\r\n    \r\n    try {\r\n      setUserDetailModal({ open: true, user, loading: false });\r\n    } catch (error) {\r\n      console.error('Error loading user details:', error);\r\n      toast.error('Không thể tải thông tin chi tiết người dùng');\r\n      setUserDetailModal({ open: false, loading: false });\r\n    }\r\n  };\r\n\r\n  const handleCloseUserDetail = () => {\r\n    setUserDetailModal({ open: false, loading: false });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-zinc-800\">Quản lý người dùng</h2>\r\n      </div>\r\n\r\n      {/* Search and Filter Bar */}\r\n      <div className=\"mb-6 flex gap-4\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm theo tên, email, số điện thoại...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n          />\r\n        </div>\r\n        <select\r\n          value={roleFilter}\r\n          onChange={(e) => setRoleFilter(e.target.value as 'all' | 'Admin' | 'User')}\r\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n        >\r\n          <option value=\"all\">Tất cả vai trò</option>\r\n          <option value=\"Admin\">Admin</option>\r\n          <option value=\"User\">User</option>\r\n        </select>\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value as 'all' | 'enabled' | 'disabled')}\r\n          className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n        >\r\n          <option value=\"all\">Tất cả trạng thái</option>\r\n          <option value=\"enabled\">Hoạt động</option>\r\n          <option value=\"disabled\">Khóa</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"bg-white border border-gray-200 rounded-xl overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Tên</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Email</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Số điện thoại</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Vai trò</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">Trạng thái</th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">Thao tác</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {filteredUsers.length > 0 ? (\r\n              filteredUsers.map((user: any) => (\r\n                <tr key={user.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                  <td className=\"px-6 py-4\">\r\n                    <div \r\n                      className=\"flex items-center gap-3 cursor-pointer hover:bg-gray-100 rounded-lg p-2 -m-2 transition-colors\"\r\n                      onClick={() => handleViewUserDetail(user)}\r\n                    >\r\n                      <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-cyan-500 rounded-full flex items-center justify-center overflow-hidden\">\r\n                        {user.avatarUrl ? (\r\n                          <img \r\n                            src={user.avatarUrl} \r\n                            alt={user.name}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={(e) => {\r\n                              e.currentTarget.style.display = 'none';\r\n                              e.currentTarget.nextElementSibling?.classList.remove('hidden');\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n                        <UserIcon className={`w-4 h-4 text-white ${user.avatarUrl ? 'hidden' : ''}`} />\r\n                      </div>\r\n                      <span className=\"text-sm font-medium text-gray-900\">{user.name}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-600\">{user.email}</td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-600\">{user.phone || 'N/A'}</td>\r\n                  <td className=\"px-6 py-4 text-sm\">\r\n                    <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${\r\n                      user.role === 'Admin' ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\r\n                    }`}>\r\n                      {user.role === 'Admin' ? <Shield className=\"w-3 h-3\" /> : <UserIcon className=\"w-3 h-3\" />}\r\n                      {user.role}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm\">\r\n                    <span className={`inline-flex px-3 py-1 rounded-full text-xs font-medium ${\r\n                      user.enabled ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                    }`}>\r\n                      {user.enabled ? 'Hoạt động' : 'Khóa'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-right\">\r\n                    <div className=\"flex items-center justify-end gap-2\">\r\n                      <button \r\n                        onClick={() => handleToggleUserStatus(user)}\r\n                        className={`p-2 rounded-lg transition-colors ${\r\n                          user.enabled \r\n                            ? 'text-red-600 hover:bg-red-50' \r\n                            : 'text-green-600 hover:bg-green-50'\r\n                        }`}\r\n                        title={user.enabled ? 'Khóa tài khoản' : 'Kích hoạt tài khoản'}\r\n                      >\r\n                        {user.enabled ? <PowerOff className=\"w-4 h-4\" /> : <Power className=\"w-4 h-4\" />}\r\n                      </button>\r\n                      <button \r\n                        onClick={() => handleDeleteUser(user)}\r\n                        className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                        title=\"Xóa tài khoản\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  {searchTerm || roleFilter !== 'all' || statusFilter !== 'all' ? 'Không tìm thấy người dùng phù hợp' : 'Chưa có người dùng nào'}\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Confirm Dialog */}\r\n      <ConfirmDialog\r\n        open={confirmDialog.open}\r\n        title=\"Xác nhận xóa tài khoản\"\r\n        message={`Bạn có chắc chắn muốn khóa tài khoản \"${confirmDialog.user?.name}\"? Tài khoản sẽ bị vô hiệu hóa.`}\r\n        confirmText=\"Khóa tài khoản\"\r\n        cancelText=\"Hủy\"\r\n        onConfirm={confirmDelete}\r\n        onCancel={() => setConfirmDialog({ open: false })}\r\n      />\r\n\r\n      {/* User Detail Modal */}\r\n      {userDetailModal.open && userDetailModal.user && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-zinc-800\">Chi tiết người dùng</h3>\r\n              <button\r\n                onClick={handleCloseUserDetail}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                ✕\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-4\">\r\n              {userDetailModal.loading ? (\r\n                <div className=\"flex items-center justify-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500\"></div>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-purple-500 to-cyan-500 rounded-full flex items-center justify-center overflow-hidden\">\r\n                      {userDetailModal.user.avatarUrl ? (\r\n                        <img \r\n                          src={userDetailModal.user.avatarUrl} \r\n                          alt={userDetailModal.user.name}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        <UserIcon className=\"w-8 h-8 text-white\" />\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <h4 className=\"text-xl font-semibold text-gray-900\">{userDetailModal.user.name}</h4>\r\n                      <p className=\"text-sm text-gray-600\">{userDetailModal.user.email}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                      <span className=\"text-sm font-medium text-gray-600\">ID:</span>\r\n                      <span className=\"text-sm text-gray-900 font-mono\">{userDetailModal.user.id}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                      <span className=\"text-sm font-medium text-gray-600\">Email:</span>\r\n                      <span className=\"text-sm text-gray-900\">{userDetailModal.user.email}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                      <span className=\"text-sm font-medium text-gray-600\">Số điện thoại:</span>\r\n                      <span className=\"text-sm text-gray-900\">{userDetailModal.user.phone || 'Chưa cập nhật'}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex justify-between items-center py-2 border-b border-gray-100\">\r\n                      <span className=\"text-sm font-medium text-gray-600\">Vai trò:</span>\r\n                      <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${\r\n                        userDetailModal.user.role === 'Admin' ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\r\n                      }`}>\r\n                        {userDetailModal.user.role === 'Admin' ? <Shield className=\"w-3 h-3\" /> : <UserIcon className=\"w-3 h-3\" />}\r\n                        {userDetailModal.user.role}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex justify-between items-center py-2\">\r\n                      <span className=\"text-sm font-medium text-gray-600\">Trạng thái:</span>\r\n                      <span className={`inline-flex px-3 py-1 rounded-full text-xs font-medium ${\r\n                        userDetailModal.user.enabled ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                      }`}>\r\n                        {userDetailModal.user.enabled ? 'Hoạt động' : 'Khóa'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-3 p-6 border-t bg-gray-50\">\r\n              <button\r\n                onClick={handleCloseUserDetail}\r\n                className=\"px-4 py-2 text-zinc-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors\"\r\n              >\r\n                Đóng\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n\r\nexport async function loadData() {\r\n  try {\r\n    const result = await userApi.getAllUsers();\r\n    return (result as any).content || result;\r\n  } catch (error) {\r\n    console.error('Error loading users:', error);\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\GuestRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\adminRoutes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\errorRoutes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\publicRoutes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\routes\\routePaths.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\stores\\authSlice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\stores\\store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\types\\query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\types\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\types\\vnpay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\axiosConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\cartService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\imageUploadService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\jwt.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\locationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\utils\\vnpayService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\DATN_TMDT\\congdc\\congdc\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]