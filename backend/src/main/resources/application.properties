spring.application.name=backend
server.port=8090

# Import secret properties
spring.config.import=optional:classpath:application-secret.properties

# supabase
# spring.datasource.url=jdbc:postgresql://db.mguogpyjgjcmjccwncdh.supabase.co:5432/postgres
# spring.datasource.driver-class-name=org.postgresql.Driver

# SQL Server Configuration
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=secure_shop;encrypt=true;trustServerCertificate=true
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

spring.jpa.properties.hibernate.format_sql=false
# spring.jpa.properties.hibernate.jdbc.time_zone=UTC  # Disabled to fix datetime2 vs datetimeoffset mismatch
spring.jpa.properties.hibernate.use_sql_comments=false
spring.jpa.properties.hibernate.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.show_sql=false
spring.jpa.open-in-view=false

# Oauth2 Google
spring.security.oauth2.client.registration.google.scope=openid, profile, email
spring.security.oauth2.client.provider.google.issuer-uri=https://accounts.google.com

# Oauth2 Facebook
spring.security.oauth2.client.registration.facebook.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.facebook.scope=email,public_profile

spring.security.oauth2.client.provider.facebook.authorization-uri=https://www.facebook.com/v15.0/dialog/oauth
spring.security.oauth2.client.provider.facebook.token-uri=https://graph.facebook.com/v15.0/oauth/access_token
spring.security.oauth2.client.provider.facebook.user-name-attribute=id
spring.security.oauth2.client.provider.facebook.user-info-uri=https://graph.facebook.com/me?fields=id,name,email,picture.type(large)

# Logging
logging.level.secure_shop.backend=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer=ERROR
logging.level.org.springframework.web.cors=WARN
logging.level.secure_shop.backend.security=INFO

# JWT
jwt.private-key-file=classpath:keys/private.pem
jwt.public-key-file=classpath:keys/public.pem
jwt.access-token-expire-seconds=900
jwt.refresh-token-expire-seconds=604800
jwt.issuer=secure-shop-backend

# Frontend
frontend.url=http://localhost:5173

# CORS
spring.web.cors.allowed-origins=http://localhost:5173
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# AI - Google Gemini (Free tier: 1500 requests/day)
gemini.api.model=gemini-2.5-flash
gemini.api.temperature=0.2


# Mail server
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=60000

# Redis Connection Pool
spring.data.redis.lettuce.pool.max-active=16
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1

# REDIS CACHE
spring.cache.type=redis
spring.cache.redis.time-to-live=30m

# List cache names
spring.cache.cache-names=articles_active,article_by_slug,categories,brands

# VNPay
logging.level.secure_shop.backend.utils.VNPayLogger=INFO

# VNPay
vnpay.url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.return-url=http://localhost:5173/payment/vnpay-return
vnpay.version=2.1.0
vnpay.command=pay
# File Upload Configuration
file.upload-dir=uploads
spring.servlet.multipart.max-file-size=5242880
spring.servlet.multipart.max-request-size=5242880
